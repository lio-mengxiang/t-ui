<!DOCTYPE html><!--JCsUNHoMPKLZv5brQoUut--><html lang="zh"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/react-t-ui/_next/static/chunks/c57f25d7aa6d6db9.css" data-precedence="next"/><link rel="stylesheet" href="/react-t-ui/_next/static/chunks/ec8a10aa2b532d44.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/react-t-ui/_next/static/chunks/b7d1a55b3ef39bbc.js"/><script src="/react-t-ui/_next/static/chunks/d73d48e9c9019a53.js" async=""></script><script src="/react-t-ui/_next/static/chunks/74ec43dceaa283e7.js" async=""></script><script src="/react-t-ui/_next/static/chunks/619b8494be332a80.js" async=""></script><script src="/react-t-ui/_next/static/chunks/turbopack-00f15764c5cb63f1.js" async=""></script><script src="/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js" async=""></script><script src="/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js" async=""></script><script src="/react-t-ui/_next/static/chunks/07a06d645a86c72b.js" async=""></script><script src="/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js" async=""></script><script src="/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js" async=""></script><script src="/react-t-ui/_next/static/chunks/123e94ce1b6cf6a6.js" async=""></script><script src="/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js" async=""></script><script src="/react-t-ui/_next/static/chunks/933f206a9e9632c6.js" async=""></script><script src="/react-t-ui/_next/static/chunks/6119c141ed8a8242.js" async=""></script><title>组件库教程社区</title><meta name="author" content="孟祥同学"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="前端动效成长社区，分享前端动效相关的知识和经验，包括 gsap、motion、three.js 等。"/><meta name="keywords" content="&#x27;前端动效&#x27;, &#x27;前端&#x27;, &#x27;前端动画课程&#x27;, &#x27;前端动画课&#x27;, &#x27;前端动画教程&#x27;, &#x27;前端动画社区&#x27;, &#x27;动效&#x27;, &#x27;gsap&#x27;, &#x27;react gsap&#x27;, &#x27;vue gsap&#x27;, &#x27;next gsap&#x27;, &#x27;gsap 3&#x27;, &#x27;motion&#x27;, &#x27;framer-motion&#x27;, &#x27;vue motion&#x27;, &#x27;vue framer-motion&#x27;, &#x27;next motion&#x27;, &#x27;react motion&#x27;, &#x27;three.js&#x27;, &#x27;threejs 动画&#x27;, &#x27;blender&#x27;, &#x27;blender 动画&#x27;, &#x27;react-three-fiber&#x27;, &#x27;three.js 动画&#x27;, &#x27;three.js 3d&#x27;"/><link rel="icon" href="/react-t-ui/favicon.ico?favicon.176b088f.ico" sizes="128x128" type="image/x-icon"/><script src="/react-t-ui/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="text-color bg-color font-sans"><div hidden=""><!--$--><!--/$--></div><script>
   ((a,b)=>{let c=localStorage.getItem(b)||a;localStorage.setItem(b,c),document.documentElement.setAttribute("class",c)})('light', 'theme');
  </script><!--$?--><template id="B:0"></template><div class="flex items-center justify-center h-screen bg-white"><div class="animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-70"></div></div><!--/$--><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/react-t-ui/_next/static/chunks/b7d1a55b3ef39bbc.js" id="_R_" async=""></script><div hidden id="S:0"><div class="px-6 py-2 bg-gradient-to-r from-pink-500/15 via-purple-500/10 to-blue-500/15 text-[#9b8691] flex justify-center text-sm">组件仍在补充, 欢迎加群交流哦，微信: a2298613245</div><nav class="sticky top-0 w-full flex justify-between items-center pl-6 pr-6 h-16 border-b border-solid border-color bg-color z-[999]"><div class="text-sm flex cursor-pointer items-center"><svg class="text-4xl" width="1em" height="1em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 300 300"><g filter="url(#filter0_dddi_801_107)"><path d="M8.34992 62.1685L12.5726 37.1704C15.4175 20.3286 30.0033 8 47.0837 8H251.245C263.762 8 273.204 19.369 270.904 31.6738L266.839 53.4291C263.744 69.993 249.285 82 232.435 82H182.535C177.284 82 172.765 85.7115 171.744 90.8625L138.384 259.273C134.674 278.004 118.241 291.5 99.1464 291.5H96.5109C78.8888 291.5 65.6476 275.416 69.0322 258.122L101.4 92.7285C102.488 87.1698 98.2322 82 92.5679 82H25.1124C14.5924 82 6.5977 72.5416 8.34992 62.1685Z" fill="url(#paint0_linear_801_107)"></path></g><defs><filter id="filter0_dddi_801_107" x="0.10791" y="0" width="295.143" height="315.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="2" dy="2"></feOffset><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.235294 0 0 0 0 0.607843 0 0 0 0 0.882353 0 0 0 1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_801_107"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="12" dy="12"></feOffset><feGaussianBlur stdDeviation="6"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="effect1_dropShadow_801_107" result="effect2_dropShadow_801_107"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="4" dy="4"></feOffset><feGaussianBlur stdDeviation="6"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="effect2_dropShadow_801_107" result="effect3_dropShadow_801_107"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect3_dropShadow_801_107" result="shape"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="-1" dy="-1"></feOffset><feGaussianBlur stdDeviation="1"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.14 0"></feColorMatrix><feBlend mode="normal" in2="shape" result="effect4_innerShadow_801_107"></feBlend></filter><linearGradient id="paint0_linear_801_107" x1="86.5" y1="8" x2="140" y2="259" gradientUnits="userSpaceOnUse"><stop stop-color="#6CC5FB"></stop><stop offset="1" stop-color="#4DADEE"></stop></linearGradient></defs></svg><span class="text-xl mt-[6px] text-nowrap">headless <span class="text-primary-hover dark:text-[#4cc3fa]">ui</span></span></div><div class="flex gap-x-2 items-center"><div class="mr-2"><div class="hover:bg-slate-50 px-2 py-0.5 text-sm border border-color rounded-lg"><div class="cursor-pointer"><div style="overflow:hidden;display:flex;flex-direction:column"><div style="display:flex"><span class="line1">导</span><span class="line1"> </span><span class="line1">航</span></div></div></div></div><div class="menu-overlay fixed top-0 left-0 w-screen h-screen px-6 py-5 bg-[#f6c646] z-[2] flex" style="clip-path:polygon(0 0, 100% 0, 100% 0, 0 0)"><div class="absolute group bottom-20 left-1/2 g active:text-slate-400 px-4 py-2 rounded-md cursor-pointer w-7 h-7 flex justify-center items-center bg-[#0a0a0a] text-[#f5c747]"><div class="group-hover:rotate-180 duration-300">✕</div></div><div class="mt-2 px-12 w-full font-geist-sans"><div class="text-[#fff99f] mb-10">组件还在补充中，希望能够帮助你有一个亮点项目放入简历！</div><div class="md:w-1/4 w-full text-[#191919]"><div class="h-[1px] w-full bg-[#5f5635] overflow-hidden mb-[6px]"></div><div class="px-1"><div class="text-base text-black/40"></div><div class="mt-[24px]"><div class="text-xl tracking-wide cursor-pointer "><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">全局方案</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">按钮 Button</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">图标 Icon</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">布局 Grid</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">间距 Space</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">输入框 Input</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">弹窗 Modal</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">弹出框 Popover</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">消息 Toast</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">警告 Alert</span></div></div></div></div></div></div></div><a class="inline-flex relative items-center justify-center outline-none h-8 text-sm appearance-none select-none cursor-pointer whitespace-nowrap transition-all duration-200 ease-linear box-border rounded text-color hover:bg-color-100 active:bg-color-200 focus-visible:border-color border border-transparent border-solid pl-2 pr-2" href="https://github.com/lio-mengxiang/mx-design" target="_blank"><svg width="20px" height="20px" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 48 48"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4ZM0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M19.1833 45.4716C18.9898 45.2219 18.9898 42.9973 19.1833 38.798C17.1114 38.8696 15.8024 38.7258 15.2563 38.3667C14.437 37.828 13.6169 36.1667 12.8891 34.9959C12.1614 33.8251 10.5463 33.64 9.89405 33.3783C9.24182 33.1165 9.07809 32.0496 11.6913 32.8565C14.3044 33.6634 14.4319 35.8607 15.2563 36.3745C16.0806 36.8883 18.0515 36.6635 18.9448 36.2519C19.8382 35.8403 19.7724 34.3078 19.9317 33.7007C20.1331 33.134 19.4233 33.0083 19.4077 33.0037C18.5355 33.0037 13.9539 32.0073 12.6955 27.5706C11.437 23.134 13.0581 20.2341 13.9229 18.9875C14.4995 18.1564 14.4485 16.3852 13.7699 13.6737C16.2335 13.3589 18.1347 14.1343 19.4734 16.0001C19.4747 16.0108 21.2285 14.9572 24.0003 14.9572C26.772 14.9572 27.7553 15.8154 28.5142 16.0001C29.2731 16.1848 29.88 12.7341 34.5668 13.6737C33.5883 15.5969 32.7689 18.0001 33.3943 18.9875C34.0198 19.9749 36.4745 23.1147 34.9666 27.5706C33.9614 30.5413 31.9853 32.3523 29.0384 33.0037C28.7005 33.1115 28.5315 33.2855 28.5315 33.5255C28.5315 33.8856 28.9884 33.9249 29.6465 35.6117C30.0853 36.7362 30.117 39.948 29.7416 45.247C28.7906 45.4891 28.0508 45.6516 27.5221 45.7347C26.5847 45.882 25.5669 45.9646 24.5669 45.9965C23.5669 46.0284 23.2196 46.0248 21.837 45.8961C20.9154 45.8103 20.0308 45.6688 19.1833 45.4716Z"></path></svg></a><button class="inline-flex relative items-center justify-center outline-none h-8 text-sm appearance-none select-none cursor-pointer whitespace-nowrap transition-all duration-200 ease-linear box-border rounded text-color hover:bg-color-100 active:bg-color-200 focus-visible:border-color border border-transparent border-solid pl-2 pr-2" type="button"><div class="w-5 h-5 bg-color-200 border border-solid rounded"></div></button></div></nav><main class="flex w-full"><div class="sticky top-[60px] overflow-hidden pt-4 pl-3 border-r border-solid border-color shrink-0 h-[calc(100vh_-_60px)] transition-all duration-300 ease-in-out" style="width:250px"><div class="z-0 h-[calc(100vh-60px)] overflow-auto" style="visibility:visible"><div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-60"><span class="flex items-center"><div style="width:NaNem"></div><svg class="text-[#FBCD2C] mr-2" width="1.4em" height="1.4em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 48 48"><path xmlns="http://www.w3.org/2000/svg" d="M26.285,2.486l5.407,10.956c0.376,0.762,1.103,1.29,1.944,1.412l12.091,1.757  c2.118,0.308,2.963,2.91,1.431,4.403l-8.749,8.528c-0.608,0.593-0.886,1.448-0.742,2.285l2.065,12.042  c0.362,2.109-1.852,3.717-3.746,2.722l-10.814-5.685c-0.752-0.395-1.651-0.395-2.403,0l-10.814,5.685  c-1.894,0.996-4.108-0.613-3.746-2.722l2.065-12.042c0.144-0.837-0.134-1.692-0.742-2.285l-8.749-8.528  c-1.532-1.494-0.687-4.096,1.431-4.403l12.091-1.757c0.841-0.122,1.568-0.65,1.944-1.412l5.407-10.956  C22.602,0.567,25.338,0.567,26.285,2.486z"></path></svg>必读指南</span></div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-60"><span class="flex items-center"><div style="width:NaNem"></div><svg class="text-[#4cc3fa] mr-2" width="1.4em" height="1.4em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 3.542-2.869 3.968-5.512 4.36-1.461.216-2.854.423-3.655 1.14-.846.757-.523 1.895-.227 2.94C13.991 21.8 14.332 23 12 23 5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11zm-2.292-.688a2.062 2.062 0 11-4.125 0 2.062 2.062 0 014.125 0zM14.98 7.876a2.062 2.062 0 100-4.125 2.062 2.062 0 000 4.125zm-4.354-2.063a2.062 2.062 0 11-4.125 0 2.062 2.062 0 014.125 0zm-5.73 7.563a2.062 2.062 0 100-4.125 2.062 2.062 0 000 4.125z"></path></svg>自定义 Message</span></div><div><div class="hover:bg-color-50 pt-3 pb-3 pl-4 pr-4 cursor-pointer flex justify-between items-center mb-0.5 rounded w-full"><span class="flex items-center gap-x-2"><svg class="text-[#4cc3fa]" width="1.6em" height="1.6em" focusable="false" stroke="currentColor" fill="currentColor" viewBox="0 0 48 48"><path d="M24 4V12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M22 22L42 26L36 30L42 36L36 42L30 36L26 42L22 22Z" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M38.1421 9.85789L32.4853 15.5147" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.85787 38.1421L15.5147 32.4853" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 24H12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.85795 9.85787L15.5148 15.5147" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg> Message 完整案例</span><svg width="1em" height="1em" focusable="false" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M36 18L24 30L12 18" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><div style="overflow:hidden;height:0px"><div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-full"><span class="flex items-center text-sm font-light"><div style="width:2.4em"></div>传统案例</span></div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-full"><span class="flex items-center text-sm font-light"><div style="width:2.4em"></div>创意案例</span></div></div></div></div></div></div><div class="fixed flex items-center justify-center text-lg text-color-500 border border-color-500 rounded-full p-1 bg-color top-56 translate-y-[-50%] cursor-pointer transition-all duration-300 ease-in-out" style="left:236px"><svg width="1em" height="1em" focusable="false" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M31 36L19 24L31 12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="grow shrink basis-0 overflow-hidden mx-16 mt-8 mb-12"><h1 class="font-medium mb-8 text-[36px]" id="如何在代码质量上超过大多数 React UI 组件库">如何在代码质量上超过大多数 React UI 组件库<div class="text-xl font-normal text-color-400">拿 Message 组件举例</div></h1>
<div class="w-full h-96 relative mt-8 mb-8 undefined"><img alt="button" loading="lazy" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/react-t-ui/toast/toast.webp"/></div>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="前言">前言</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">注：以下 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 这个名称在国外很常见，对应国内的组件是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">message</code> 和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">notification</code> 组件。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我的组件大多数是参考了很多国内外知名组件库，所以质量上一般都不会有问题（有些同学会问，为什么不自己从 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">0</code> 到 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">1</code> 自己实现组件库，其实很简单，我就是敢写，你也不敢用呀，哈哈）。
所以知道这些成熟的，经历过大项目考验的组件库的实现思路，才能有更强的实用性， 让组件库切切实实的可以用在实际项目中，或者在王炸的项目经历，让自己在面试中脱颖而出。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">但在这个过程中，我发现大厂，写 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">UI</code> 组件的时候基本上是不分层的? 最基础的业务组件分层，分为：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>视图层：<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">vue</code> 作为纯视图渲染</li>
<li>数据层：聚合了业务数据和业务数据的处理，在做技术方案的时候，其实大多数情况下是对数据层的数据流向变化做梳理</li>
<li>异步管理层：主要请求后端数据和解决一些复杂的异步管理问题</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">而且如果你要做开源的项目的话，逻辑分的细一些，对于测试是非常友好的（做过单元测的朋友都懂，哈哈）。
具体案例后面会讲，我们先看看为什么分层之后你的代码质量会更高。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们拿一家国内算是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Top3</code> 的大厂的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Message</code> 组件的代码来看看我们的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Toast</code>（消息通知） 组件为什么分层之后比它的代码质量好很多。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-javascript" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token literal-property" style="color:#96CBFE">MessageContainer</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#99CC99">FC</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token maybe-class-name">MessageContainerProps</span><span class="token" style="color:#EDEDED">&gt;</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">props</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span>  </span><span class="token" style="color:#7C7C7C">// xxx代码省略</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span>  </span><span class="token" style="color:#DAD085">useEffect</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>  </span><span class="token" style="color:#7C7C7C">// xxx</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>  </span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span>    xxx
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span></span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">createContainer</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span> attach</span><span class="token" style="color:#c5c8c6">,</span><span> zIndex</span><span class="token" style="color:#c5c8c6">,</span><span> placement </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#A8FF60">&#x27;top&#x27;</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">MessageOptions</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token known-class-name" style="color:#FFFFB6;text-decoration:underline">Promise</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token maybe-class-name">Element</span><span class="token" style="color:#EDEDED">&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span>  </span><span class="token" style="color:#7C7C7C">// xxx</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span></span><span class="token" style="color:#96CBFE">async</span><span> </span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">renderElement</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">theme</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> </span><span class="token parameter literal-property" style="color:#96CBFE">config</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">MessageOptions</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token known-class-name" style="color:#FFFFB6;text-decoration:underline">Promise</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token maybe-class-name">MessageInstance</span><span class="token" style="color:#EDEDED">&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span>  </span><span class="token" style="color:#7C7C7C">// xxx</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span><span></span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">isConfig</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">content</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">MessageOptions</span><span class="token parameter"> </span><span class="token parameter" style="color:#EDEDED">|</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">React</span><span class="token parameter" style="color:#c5c8c6">.</span><span class="token parameter property-access maybe-class-name">ReactNode</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span><span> content is </span><span class="token maybe-class-name">MessageOptions</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span><span>  </span><span class="token" style="color:#7C7C7C">// xxx</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span></span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token literal-property" style="color:#96CBFE">messageMethod</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DAD085">MessageMethod</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">theme</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">MessageThemeList</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> content</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> duration</span><span class="token parameter" style="color:#EDEDED">?</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> number</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span><span>  </span><span class="token" style="color:#7C7C7C">// xxx</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span></span><span class="token" style="color:#7C7C7C">// 创建</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span><span></span><span class="token module" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token literal-property" style="color:#96CBFE">MessagePlugin</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DAD085">MessagePlugin</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">theme</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> message</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> duration</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#DAD085">messageMethod</span><span class="token" style="color:#c5c8c6">(</span><span>theme</span><span class="token" style="color:#c5c8c6">,</span><span> message</span><span class="token" style="color:#c5c8c6">,</span><span> duration</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">info</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> xx
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">error</span><span> </span><span class="token" style="color:#EDEDED">=</span><span>  xx
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">warning</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> xx
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">success</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> xx
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">29</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">question</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> xx
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">30</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">loading</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> xx
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">31</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">config</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> xx
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">32</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token method-variable function-variable method property-access" style="color:#DAD085">close</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">messageInstance</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">33</span><span>  </span><span class="token" style="color:#7C7C7C">// xx</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">34</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">35</span><span></span><span class="token maybe-class-name">MessagePlugin</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">closeAll</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token parameter maybe-class-name">MessageCloseAllMethod</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">36</span><span>  </span><span class="token" style="color:#7C7C7C">// xx</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">37</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">38</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">39</span><span></span><span class="token module" style="color:#96CBFE">export</span><span> </span><span class="token module" style="color:#96CBFE">default</span><span> </span><span class="token maybe-class-name">MessageComponent</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这里最大的疑惑，例如</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>上面的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">function isConfig</code> 这个函数属于工具函数，是否应该单独提到一个文件中，然后引入呢？</li>
<li><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">createContainer</code> 和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">MessageContainer</code> 都属于跟创建容器相关的，是否应该放到一个文件中呢？</li>
<li><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">renderElement</code> 这个函数属于渲染元素的函数，是否应该放到一个文件中呢？</li>
<li>...等等</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这里并不是为了 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">踩一捧一</code>，而是很多会迷信大厂的代码，觉得自己实力不够不敢去面试，我想告诉你，并不是大厂的程序员
都是你想象的那样优秀，只是想激励这些对于面试大厂有些胆怯的朋友。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="分层设计">分层设计</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">再来看看经过简单的分层设计后，我们的代码的基本框架是什么：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-javascript" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#EDEDED">--</span><span> </span><span class="token" style="color:#EDEDED">/</span><span>toast
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span>  </span><span class="token" style="color:#EDEDED">--</span><span> </span><span class="token" style="color:#EDEDED">/</span><span>hooks 存放 hooks 相关的代码的文件夹
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span>  </span><span class="token" style="color:#EDEDED">--</span><span> </span><span class="token" style="color:#EDEDED">/</span><span>utils 存放工具函数相关的代码的文件夹
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>  </span><span class="token" style="color:#EDEDED">--</span><span> index</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">ts</span><span> 入口文件
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>  </span><span class="token" style="color:#EDEDED">--</span><span> </span><span class="token" style="color:#96CBFE">interface</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">ts</span><span> 存放接口相关的代码
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>  </span><span class="token" style="color:#EDEDED">--</span><span> store</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">tsx</span><span> 数据层
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span>  </span><span class="token" style="color:#EDEDED">--</span><span> toast</span><span class="token" style="color:#EDEDED">-</span><span>container</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">tsx</span><span> 创建单个 message 的组件
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span>  </span><span class="token" style="color:#EDEDED">--</span><span> toast</span><span class="token" style="color:#EDEDED">-</span><span>provider</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">tsx</span><span> 连接数据层（store）和视图层（ToastContainer）
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们拿其中的数据层 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">store.tsx</code> 来看看我的数据层设计，我个人觉得是十分清晰的。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-javascript" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">createToastStore</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>state</span><span class="token" style="color:#c5c8c6">,</span><span> setState</span><span class="token" style="color:#c5c8c6">]</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">useState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>  </span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>    state</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#7C7C7C">// 当前的 toast/message 列表</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>    </span><span class="token function-variable" style="color:#DAD085">add</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">noticeProps</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">MessageProps</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span>      </span><span class="token" style="color:#7C7C7C">// 增加 toast/message</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span>    </span><span class="token function-variable" style="color:#DAD085">update</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">id</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> number</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> </span><span class="token parameter literal-property" style="color:#96CBFE">options</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">MessageProps</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span>      </span><span class="token" style="color:#7C7C7C">// 更新 toast/message</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span>    </span><span class="token function-variable" style="color:#DAD085">clearAll</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span><span>      </span><span class="token" style="color:#7C7C7C">// 清除所有 toast/message</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span><span>    </span><span class="token function-variable" style="color:#DAD085">remove</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">id</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> number</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span>      </span><span class="token" style="color:#7C7C7C">// 清除某个 toast/message</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span><span></span><span class="token module" style="color:#96CBFE">export</span><span> </span><span class="token module" style="color:#96CBFE">default</span><span> useStore</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">是不是看到我们的核心数据都在state中，然后对于数据的操作包含：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">add</code> 方法,增加 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Message</code></p>
</li>
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">update</code> 方法，更新 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Message</code></p>
</li>
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">clearAll</code> 方法，清除所有 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Message</code></p>
</li>
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">remove</code> 方法，清除某个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Message</code></p>
</li>
</ul>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="实现框架无关的数据层">实现框架无关的数据层</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们知道 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 有一些独立的数据层设计库，例如 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">zustand</code>，<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">redux</code> 等， <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">vue</code> 中有例如 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">pinia</code>, <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Vuex</code> 等等。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">其实本质就是一个数据集合，可以增删改查，然后通知订阅了这个数据集合的组件，再试用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">vue</code> 中更新 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">DOM</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">API</code> 进行更新。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">例如以下代码后面会结合 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">useSyncExternalStore</code> 来实现数据的订阅和更新。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">具体代码如下，有兴趣的可以看一下（看不懂没关系，如果想了解 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">headless</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Toast</code> 组件如何实现，欢迎加入到我们的技术社区）：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-javascript" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token" style="color:#99CC99">DIRECTION</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;./constants&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> getId</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> findToast</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> getToastDirection </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;./utils&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#7C7C7C">// types</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span></span><span class="token module" style="color:#96CBFE">import</span><span> type </span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token maybe-class-name">ToastStates</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token maybe-class-name">ToastProps</span><span> </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;./interface&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span></span><span class="token" style="color:#7C7C7C">// state</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span></span><span class="token module" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">createToastStore</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span></span><span class="token" style="color:#96CBFE">let</span><span> </span><span class="token literal-property" style="color:#96CBFE">state</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">ToastStates</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span></span><span class="token" style="color:#96CBFE">const</span><span> listeners </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#96CBFE">new</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">Set</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#96CBFE">void</span><span class="token" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span></span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token function-variable" style="color:#DAD085">setState</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token function-variable" style="color:#DAD085">setStateFn</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">values</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">ToastStates</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token maybe-class-name">ToastStates</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span><span>  state </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">setStateFn</span><span class="token" style="color:#c5c8c6">(</span><span>state</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span>  listeners</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">forEach</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">l</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#DAD085">l</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span><span></span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span><span>  </span><span class="token function-variable" style="color:#DAD085">getState</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> state</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span>  </span><span class="token function-variable" style="color:#DAD085">subscribe</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">listener</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span><span>    listeners</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">add</span><span class="token" style="color:#c5c8c6">(</span><span>listener</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span><span>    </span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span>      </span><span class="token" style="color:#DAD085">setState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span><span>      listeners</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">delete</span><span class="token" style="color:#c5c8c6">(</span><span>listener</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27</span><span>  </span><span class="token function-variable" style="color:#DAD085">add</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">noticeProps</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">ToastProps</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token literal-property" style="color:#96CBFE">id</span><span class="token" style="color:#EDEDED">:</span><span> number </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">getId</span><span class="token" style="color:#c5c8c6">(</span><span>noticeProps</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">29</span><span>    </span><span class="token" style="color:#DAD085">setState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">preState</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">ToastStates</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">30</span><span>      </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>noticeProps</span><span class="token" style="color:#EDEDED">?.</span><span>id</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">31</span><span>        </span><span class="token" style="color:#96CBFE">const</span><span> isExist </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">getToastDirection</span><span class="token" style="color:#c5c8c6">(</span><span>preState</span><span class="token" style="color:#c5c8c6">,</span><span> noticeProps</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">id</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">32</span><span>        </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>isExist</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token control-flow" style="color:#96CBFE">return</span><span> preState</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">33</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">34</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> direction </span><span class="token" style="color:#EDEDED">=</span><span> noticeProps</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">direction</span><span> </span><span class="token" style="color:#EDEDED">||</span><span> </span><span class="token" style="color:#99CC99">DIRECTION</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#99CC99">TOP_TO_BOTTOM</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">35</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> isBottom </span><span class="token" style="color:#EDEDED">=</span><span> direction </span><span class="token" style="color:#EDEDED">===</span><span> </span><span class="token" style="color:#99CC99">DIRECTION</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#99CC99">BOTTOM_TO_TOP</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">36</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> toasts </span><span class="token" style="color:#EDEDED">=</span><span> isBottom
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">37</span><span>        </span><span class="token" style="color:#EDEDED">?</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token spread" style="color:#EDEDED">...</span><span class="token" style="color:#c5c8c6">(</span><span>preState </span><span class="token" style="color:#EDEDED">??</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token spread" style="color:#EDEDED">...</span><span>noticeProps</span><span class="token" style="color:#c5c8c6">,</span><span> id</span><span class="token" style="color:#c5c8c6">,</span><span> direction </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">]</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">38</span><span>        </span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token spread" style="color:#EDEDED">...</span><span>noticeProps</span><span class="token" style="color:#c5c8c6">,</span><span> id</span><span class="token" style="color:#c5c8c6">,</span><span> direction </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token spread" style="color:#EDEDED">...</span><span class="token" style="color:#c5c8c6">(</span><span>preState </span><span class="token" style="color:#EDEDED">??</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">39</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">40</span><span>      </span><span class="token control-flow" style="color:#96CBFE">return</span><span> toasts</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">41</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">42</span><span>    </span><span class="token control-flow" style="color:#96CBFE">return</span><span> noticeProps</span><span class="token" style="color:#EDEDED">?.</span><span>id </span><span class="token" style="color:#EDEDED">?</span><span> noticeProps</span><span class="token" style="color:#EDEDED">?.</span><span>id </span><span class="token" style="color:#EDEDED">:</span><span> id</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">43</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">44</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">45</span><span>  </span><span class="token literal-property" style="color:#96CBFE">update</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>id</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">ToastProps</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">&#x27;id&#x27;</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token literal-property" style="color:#96CBFE">options</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">ToastProps</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">46</span><span>    </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#EDEDED">!</span><span>id</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token control-flow" style="color:#96CBFE">return</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">47</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">48</span><span>    </span><span class="token" style="color:#DAD085">setState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">preState</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">49</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> nextState </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token spread" style="color:#EDEDED">...</span><span>preState </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">50</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> index </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">findToast</span><span class="token" style="color:#c5c8c6">(</span><span>nextState</span><span class="token" style="color:#c5c8c6">,</span><span> id</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">51</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">52</span><span>      </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>index </span><span class="token" style="color:#EDEDED">!==</span><span> </span><span class="token" style="color:#EDEDED">-</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">53</span><span>        nextState</span><span class="token" style="color:#c5c8c6">[</span><span>index</span><span class="token" style="color:#c5c8c6">]</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">54</span><span>          </span><span class="token spread" style="color:#EDEDED">...</span><span>nextState</span><span class="token" style="color:#c5c8c6">[</span><span>index</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">55</span><span>          </span><span class="token spread" style="color:#EDEDED">...</span><span>options</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">56</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">57</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">58</span><span>      </span><span class="token control-flow" style="color:#96CBFE">return</span><span> nextState</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">59</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">60</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">61</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">62</span><span>  </span><span class="token function-variable" style="color:#DAD085">clearAll</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">63</span><span>    </span><span class="token" style="color:#DAD085">setState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">64</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">65</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">66</span><span>  </span><span class="token function-variable" style="color:#DAD085">remove</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">id</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> number</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">67</span><span>    </span><span class="token" style="color:#DAD085">setState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">prevState</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">68</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> isExist </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">getToastDirection</span><span class="token" style="color:#c5c8c6">(</span><span>prevState</span><span class="token" style="color:#c5c8c6">,</span><span> id</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">69</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">70</span><span>      </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#EDEDED">!</span><span>isExist</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token control-flow" style="color:#96CBFE">return</span><span> prevState</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">71</span><span>      </span><span class="token control-flow" style="color:#96CBFE">return</span><span> prevState</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">filter</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">notice</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> notice</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">id</span><span> </span><span class="token" style="color:#EDEDED">!==</span><span> id</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">72</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">73</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">74</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">75</span><span></span><span class="token" style="color:#c5c8c6">}</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">其实上面代码，有仅仅使用了一个简单的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">发布订阅模式</code>, 实现了一个小的数据流管理器，可以看到是没有耦合任何框架的。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这样的好处很显而易见，如果我需要做单元测试，那么我仅仅测试 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">javascript</code> 代码就可以直接对管理 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 或者说 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">message</code> 组件的代码来看看我们的
核心数据流管理器进行测试，甚至都可以在没有测试组件之前，就能发现问题。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">当然，如果用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">hooks</code> 管理数据层也是完全没有问题的，也相当于把数据层单独管理了。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="函数调用的方式使用">函数调用的方式使用</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">消息提示类组件，一些组件库会使用类似 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">useMessage</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">useToast</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">hooks</code> 的方式使用。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">但是我是非常不推荐这样用的，一是麻烦，二是前端有非常多的这样的场景，例如使用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">axios</code> 或者一些更新的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">fetch</code> 为基础封装请求库。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">然后我们会在请求失败的时候做一层统一拦截，当后端返回错误的时候，我们就用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">message</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件显示到前端页面。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">此时很可能调用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">message</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件的位置，并不在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">vue</code> 文件中，而是在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">axios</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">fetch</code> 封装的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">.js</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">.ts</code> 结尾的文件中。例如:
什么意思呢？</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这些文件是纯 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">js</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ts</code> 文件。所以 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">API</code> 设计的时候，一定要支持类似用法：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> createToastStore </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@t-headless-ui/react&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#96CBFE">const</span><span> toastStore </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">createToastStore</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span></span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DAD085">App</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span></span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>  </span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#FFFFB6;text-decoration:underline">Button</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span class="token" style="color:#96CBFE">    </span><span class="token" style="color:#A8FF60">onClick</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript arrow" style="color:#96CBFE">=&gt;</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span class="token script language-javascript" style="color:#96CBFE">      toastStore</span><span class="token script language-javascript" style="color:#c5c8c6">.</span><span class="token script language-javascript method property-access" style="color:#96CBFE">add</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#96CBFE">xxx参数</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#c5c8c6">;</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span class="token script language-javascript" style="color:#96CBFE">    </span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span class="token" style="color:#96CBFE">    </span><span class="token" style="color:#A8FF60">type</span><span class="token attr-equals" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">&#x27;</span><span class="token" style="color:#F9EE98">primary</span><span class="token" style="color:#c5c8c6">&#x27;</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#c5c8c6">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span>    Open Message
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span class="token plain-text">  </span><span class="token" style="color:#c5c8c6">&lt;/</span><span class="token" style="color:#FFFFB6;text-decoration:underline">Button</span><span class="token" style="color:#c5c8c6">&gt;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span></span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">当然这里不建议大家直接这样使用，因为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">@t-headless-ui/react</code> 是一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">headless</code> 组件库，所以我们的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件是没有样式的，需要单独封装。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们会单独封装一份业务上可以用的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">message</code> 组件和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">notification</code> 组件。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="其它技术细节">其它技术细节</h2>
<ul class="list-disc p-0 m-6 space-y-4">
<li>如何在此基础上增加 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">limit</code> 限制 toast 组件的数量</li>
<li>如何在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">hover</code> 的时候，暂停 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件的自动关闭功能</li>
<li>如何在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">close</code> 按钮被点击的时候，立即关闭 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code></li>
<li>如何设计更多有趣的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件的展示动画</li>
<li>...等等</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">欢迎大家加入我的国内首个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">组件库技术社区</code> 一起讨论。同时也提供手把手帮你打造一个自己的组件库相关项目服务，并成为你面试 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">亮点项目</code>，在面试中 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">脱颖而出</code>。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="附录">附录</h2>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="安装 toast">安装 toast</h3>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-bash" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#DAD085">npm</span><span> i @t-headless-ui/react
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#DAD085">yarn</span><span> i @t-headless-ui/react
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#DAD085">pnpm</span><span> i @t-headless-ui/react</span></span></code></div></div>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="引入和使用 toast">引入和使用 toast</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件跟别的组件不太一样，首先需要你调用创建一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">store</code> 实例：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-tsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> createToastStore </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@t-headless-ui/react&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#96CBFE">const</span><span> toastStore </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">createToastStore</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">目的是用这个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">store</code> 来管理 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件的状态，例如添加、删除、更新 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件的状态。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">其中支持传入两个参数</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>maxCount: 默认是 6，也就是最多同时展示 6 个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> / <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">message</code> 组件</li>
<li>direction: 默认是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">top-to-bottom</code>，表示卡片是从上到下堆叠，还是从下到上堆叠，主要是在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">stack</code> 模式有用（后续会讲）</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">然后引入 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ToastProvider</code> 组件，将 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">store</code> 实例作为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">prop</code> 传递给 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ToastProvider</code> 组件。<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ToastProvider</code> 组件一般放在你的项目的入口文件中，
例如 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">App.tsx</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">App.jsx</code> 文件。目的是初始化 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Toast</code> 组件（其背后默认会在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">document.body</code> 创建一个可以出现 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 信息框），当然我们也支持自定义插入
到某个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">dom</code> 元素中，一般情况使用默认的即可。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-tsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ToastProvider</span><span class="token imports"> </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@t-headless-ui/react&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#7C7C7C">// 以下的 TOAST_Z_INDEX 代表是的 z-[2000]，也就是 z-index 是 2000 (popover 组件设计的 z-index 是 1000)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#7C7C7C">// 其实 z-index 管理是一个比较复杂的问题，可以在全局方案设计看 z-index 管理问题</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span></span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#FFFFB6;text-decoration:underline">ToastProvider</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#A8FF60">store</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">toastStore</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#A8FF60">containerProps</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span class="token script language-javascript" style="color:#96CBFE">  className</span><span class="token script language-javascript" style="color:#EDEDED">:</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#DAD085">cs</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#A8FF60">&#x27;w-full fixed top-8 flex flex-col items-center pointer-events-none&#x27;</span><span class="token script language-javascript" style="color:#c5c8c6">,</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript template-string template-punctuation" style="color:#96CBFE">`</span><span class="token script language-javascript template-string interpolation interpolation-punctuation" style="color:#96CBFE">${</span><span class="token script language-javascript template-string interpolation" style="color:#96CBFE">TOAST_Z_INDEX</span><span class="token script language-javascript template-string interpolation interpolation-punctuation" style="color:#96CBFE">}</span><span class="token script language-javascript template-string template-punctuation" style="color:#96CBFE">`</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#7C7C7C">// stack 是否开启堆叠模式，默认是 false</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#c5c8c6">/&gt;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">注意，上面有个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">containerProps</code> 参数，其中我们传入了 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">className</code> 属性，目的是用来定义这个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件在哪个位置弹出，这里我们使用的是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">top-8</code>（可以理解为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">top: 30px</code>）,并且 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">fixed</code> 定位。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">所以，你可以定位到任何位置，甚至在某个容器中，这个容易的定位设为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">relative</code>, 我们 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 的定位设置为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">absolute</code>，这样就相当于某个容器定位了。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">上面注释谈到 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">z-index</code> 管理问题，这个问题实际上在多个弹框出现时，是很容易产生问题的，问题本身和解决思路，可以查看在我们的全局方管理方案系列文章。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">然后之前的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toastStore</code> 你可以通过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Provider</code> 共享给 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 组件树中的所有组件，或者直接 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">export</code> 直接导出，这样等页面渲染完毕，</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">如此的话，无论是在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">react</code> 组件内部，还是直接在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">js</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ts</code> 文件中调用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toastStore.add</code> 方法，都可以添加一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件了。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">以下是通过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toastStore.add</code> 方法来添加一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件的案例，我们直接使用了 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Alert</code> 组件充当 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 的内容。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-tsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#96CBFE">button</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#A8FF60">onClick</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript arrow" style="color:#96CBFE">=&gt;</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span class="token script language-javascript" style="color:#96CBFE">  toastStore</span><span class="token script language-javascript" style="color:#c5c8c6">.</span><span class="token script language-javascript method property-access" style="color:#96CBFE">add</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span class="token script language-javascript" style="color:#96CBFE">    component</span><span class="token script language-javascript" style="color:#EDEDED">:</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#c5c8c6">&lt;</span><span class="token script language-javascript" style="color:#FFFFB6;text-decoration:underline">TAlert</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#A8FF60">message</span><span class="token script language-javascript attr-equals" style="color:#F9EE98">=</span><span class="token script language-javascript" style="color:#F9EE98">&quot;</span><span class="token script language-javascript" style="color:#F9EE98">这是一条通知</span><span class="token script language-javascript" style="color:#F9EE98">&quot;</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#A8FF60">title</span><span class="token script language-javascript attr-equals" style="color:#F9EE98">=</span><span class="token script language-javascript" style="color:#F9EE98">&quot;</span><span class="token script language-javascript" style="color:#F9EE98">Alter</span><span class="token script language-javascript" style="color:#F9EE98">&quot;</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#A8FF60">containerClassName</span><span class="token script language-javascript attr-equals" style="color:#F9EE98">=</span><span class="token script language-javascript" style="color:#F9EE98">&quot;</span><span class="token script language-javascript" style="color:#F9EE98">pb-2</span><span class="token script language-javascript" style="color:#F9EE98">&quot;</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#c5c8c6">/&gt;</span><span class="token script language-javascript" style="color:#c5c8c6">,</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span class="token script language-javascript" style="color:#96CBFE">  </span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span class="token script language-javascript" style="color:#96CBFE"></span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#c5c8c6">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span>点击我显示通知
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span class="token plain-text"></span><span class="token" style="color:#c5c8c6">&lt;/</span><span class="token" style="color:#96CBFE">button</span><span class="token" style="color:#c5c8c6">&gt;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">因为我们的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">toast</code> 组件是一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">headless</code> 组件，所以弹出的内容完全是自定义的，后面，我们会再次封装，使用便捷性上会更上一层楼。</p></div><div class="hidden z-10 xl:flex xl:w-48 mt-8 pl-0 shrink-0"><div class="sticky top-[90px] overflow-y-auto h-[calc(100vh-100px)]"><div data-target-id="前言"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">前言</div></div><div data-target-id="分层设计"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">分层设计</div></div><div data-target-id="实现框架无关的数据层"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">实现框架无关的数据层</div></div><div data-target-id="函数调用的方式使用"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">函数调用的方式使用</div></div><div data-target-id="其它技术细节"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">其它技术细节</div></div><div data-target-id="附录"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">附录</div><div data-target-id="安装 toast"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">安装 toast</div></div><div data-target-id="引入和使用 toast"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">引入和使用 toast</div></div></div></div></div><!--$--><!--/$--></main></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[40104,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ClientSegmentRoot\"]\n3:I[97688,[\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\"],\"default\"]\n4:I[65932,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"default\"]\n5:I[20542,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"default\"]\n7:I[83842,[\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\",\"/react-t-ui/_next/static/chunks/123e94ce1b6cf6a6.js\",\"/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js\"],\"default\"]\n9:I[87039,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ClientPageRoot\"]\na:I[16548,[\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\",\"/react-t-ui/_next/static/chunks/123e94ce1b6cf6a6.js\",\"/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js\",\"/react-t-ui/_next/static/chunks/933f206a9e9632c6.js\",\"/react-t-ui/_next/static/chunks/6119c141ed8a8242.js\"],\"default\"]\nd:I[6861,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"OutletBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[6861,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ViewportBoundary\"]\n12:I[6861,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"MetadataBoundary\"]\n14:I[56272,[],\"default\"]\n:HL[\"/react-t-ui/_next/static/chunks/c57f25d7aa6d6db9.css\",\"style\"]\n:HL[\"/react-t-ui/_next/static/chunks/ec8a10aa2b532d44.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"JCsUNHoMPKLZv5brQoUut\",\"c\":[\"\",\"toast\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"toast\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/react-t-ui/_next/static/chunks/c57f25d7aa6d6db9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$3\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"serverProvidedParams\":{\"params\":{},\"promises\":[\"$@6\"]}}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/react-t-ui/_next/static/chunks/123e94ce1b6cf6a6.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$7\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"serverProvidedParams\":{\"params\":\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\",\"promises\":[\"$@8\"]}}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L9\",null,{\"Component\":\"$a\",\"serverProvidedParams\":{\"searchParams\":{},\"params\":\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\",\"promises\":[\"$@b\",\"$@c\"]}}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/react-t-ui/_next/static/chunks/ec8a10aa2b532d44.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/react-t-ui/_next/static/chunks/933f206a9e9632c6.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/react-t-ui/_next/static/chunks/6119c141ed8a8242.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@f\"}]}]]}],{},null,false,false]},null,false,false]},[[\"$\",\"div\",\"l\",{\"className\":\"flex items-center justify-center h-screen bg-white\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-70\"}]}],[],[]],false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L10\",null,{\"children\":\"$@11\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@13\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$14\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"6:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\n8:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\nb:{}\nc:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"15:I[83528,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"IconMark\"]\n13:[[\"$\",\"link\",\"0\",{\"rel\":\"icon\",\"href\":\"/react-t-ui/favicon.ico?favicon.176b088f.ico\",\"sizes\":\"128x128\",\"type\":\"image/x-icon\"}],[\"$\",\"$L15\",\"1\",{}]]\nf:null\n"])</script></body></html>