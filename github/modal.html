<!DOCTYPE html><!--JCsUNHoMPKLZv5brQoUut--><html lang="zh"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/react-t-ui/_next/static/chunks/c57f25d7aa6d6db9.css" data-precedence="next"/><link rel="stylesheet" href="/react-t-ui/_next/static/chunks/ec8a10aa2b532d44.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/react-t-ui/_next/static/chunks/b7d1a55b3ef39bbc.js"/><script src="/react-t-ui/_next/static/chunks/d73d48e9c9019a53.js" async=""></script><script src="/react-t-ui/_next/static/chunks/74ec43dceaa283e7.js" async=""></script><script src="/react-t-ui/_next/static/chunks/619b8494be332a80.js" async=""></script><script src="/react-t-ui/_next/static/chunks/turbopack-00f15764c5cb63f1.js" async=""></script><script src="/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js" async=""></script><script src="/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js" async=""></script><script src="/react-t-ui/_next/static/chunks/07a06d645a86c72b.js" async=""></script><script src="/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js" async=""></script><script src="/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js" async=""></script><script src="/react-t-ui/_next/static/chunks/59d6bf74fd348050.js" async=""></script><script src="/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js" async=""></script><script src="/react-t-ui/_next/static/chunks/37f7359b649c8f51.js" async=""></script><script src="/react-t-ui/_next/static/chunks/6119c141ed8a8242.js" async=""></script><title>组件库教程社区</title><meta name="author" content="孟祥同学"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="前端动效成长社区，分享前端动效相关的知识和经验，包括 gsap、motion、three.js 等。"/><meta name="keywords" content="&#x27;前端动效&#x27;, &#x27;前端&#x27;, &#x27;前端动画课程&#x27;, &#x27;前端动画课&#x27;, &#x27;前端动画教程&#x27;, &#x27;前端动画社区&#x27;, &#x27;动效&#x27;, &#x27;gsap&#x27;, &#x27;react gsap&#x27;, &#x27;vue gsap&#x27;, &#x27;next gsap&#x27;, &#x27;gsap 3&#x27;, &#x27;motion&#x27;, &#x27;framer-motion&#x27;, &#x27;vue motion&#x27;, &#x27;vue framer-motion&#x27;, &#x27;next motion&#x27;, &#x27;react motion&#x27;, &#x27;three.js&#x27;, &#x27;threejs 动画&#x27;, &#x27;blender&#x27;, &#x27;blender 动画&#x27;, &#x27;react-three-fiber&#x27;, &#x27;three.js 动画&#x27;, &#x27;three.js 3d&#x27;"/><link rel="icon" href="/react-t-ui/favicon.ico?favicon.176b088f.ico" sizes="128x128" type="image/x-icon"/><script src="/react-t-ui/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="text-color bg-color font-sans"><div hidden=""><!--$--><!--/$--></div><script>
   ((a,b)=>{let c=localStorage.getItem(b)||a;localStorage.setItem(b,c),document.documentElement.setAttribute("class",c)})('light', 'theme');
  </script><!--$?--><template id="B:0"></template><div class="flex items-center justify-center h-screen bg-white"><div class="animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-70"></div></div><!--/$--><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/react-t-ui/_next/static/chunks/b7d1a55b3ef39bbc.js" id="_R_" async=""></script><div hidden id="S:0"><div class="px-6 py-2 bg-gradient-to-r from-pink-500/15 via-purple-500/10 to-blue-500/15 text-[#9b8691] flex justify-center text-sm">组件仍在补充, 欢迎加群交流哦，微信: a2298613245</div><nav class="sticky top-0 w-full flex justify-between items-center pl-6 pr-6 h-16 border-b border-solid border-color bg-color z-[999]"><div class="text-sm flex cursor-pointer items-center"><svg class="text-4xl" width="1em" height="1em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 300 300"><g filter="url(#filter0_dddi_801_107)"><path d="M8.34992 62.1685L12.5726 37.1704C15.4175 20.3286 30.0033 8 47.0837 8H251.245C263.762 8 273.204 19.369 270.904 31.6738L266.839 53.4291C263.744 69.993 249.285 82 232.435 82H182.535C177.284 82 172.765 85.7115 171.744 90.8625L138.384 259.273C134.674 278.004 118.241 291.5 99.1464 291.5H96.5109C78.8888 291.5 65.6476 275.416 69.0322 258.122L101.4 92.7285C102.488 87.1698 98.2322 82 92.5679 82H25.1124C14.5924 82 6.5977 72.5416 8.34992 62.1685Z" fill="url(#paint0_linear_801_107)"></path></g><defs><filter id="filter0_dddi_801_107" x="0.10791" y="0" width="295.143" height="315.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="2" dy="2"></feOffset><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.235294 0 0 0 0 0.607843 0 0 0 0 0.882353 0 0 0 1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_801_107"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="12" dy="12"></feOffset><feGaussianBlur stdDeviation="6"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="effect1_dropShadow_801_107" result="effect2_dropShadow_801_107"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="4" dy="4"></feOffset><feGaussianBlur stdDeviation="6"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="effect2_dropShadow_801_107" result="effect3_dropShadow_801_107"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect3_dropShadow_801_107" result="shape"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="-1" dy="-1"></feOffset><feGaussianBlur stdDeviation="1"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.14 0"></feColorMatrix><feBlend mode="normal" in2="shape" result="effect4_innerShadow_801_107"></feBlend></filter><linearGradient id="paint0_linear_801_107" x1="86.5" y1="8" x2="140" y2="259" gradientUnits="userSpaceOnUse"><stop stop-color="#6CC5FB"></stop><stop offset="1" stop-color="#4DADEE"></stop></linearGradient></defs></svg><span class="text-xl mt-[6px] text-nowrap">headless <span class="text-primary-hover dark:text-[#4cc3fa]">ui</span></span></div><div class="flex gap-x-2 items-center"><div class="mr-2"><div class="hover:bg-slate-50 px-2 py-0.5 text-sm border border-color rounded-lg"><div class="cursor-pointer"><div style="overflow:hidden;display:flex;flex-direction:column"><div style="display:flex"><span class="line1">导</span><span class="line1"> </span><span class="line1">航</span></div></div></div></div><div class="menu-overlay fixed top-0 left-0 w-screen h-screen px-6 py-5 bg-[#f6c646] z-[2] flex" style="clip-path:polygon(0 0, 100% 0, 100% 0, 0 0)"><div class="absolute group bottom-20 left-1/2 g active:text-slate-400 px-4 py-2 rounded-md cursor-pointer w-7 h-7 flex justify-center items-center bg-[#0a0a0a] text-[#f5c747]"><div class="group-hover:rotate-180 duration-300">✕</div></div><div class="mt-2 px-12 w-full font-geist-sans"><div class="text-[#fff99f] mb-10">组件还在补充中，希望能够帮助你有一个亮点项目放入简历！</div><div class="md:w-1/4 w-full text-[#191919]"><div class="h-[1px] w-full bg-[#5f5635] overflow-hidden mb-[6px]"></div><div class="px-1"><div class="text-base text-black/40"></div><div class="mt-[24px]"><div class="text-xl tracking-wide cursor-pointer "><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">全局方案</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">按钮 Button</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">图标 Icon</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">布局 Grid</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">间距 Space</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">输入框 Input</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">弹窗 Modal</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">弹出框 Popover</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">消息 Toast</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">警告 Alert</span></div></div></div></div></div></div></div><a class="inline-flex relative items-center justify-center outline-none h-8 text-sm appearance-none select-none cursor-pointer whitespace-nowrap transition-all duration-200 ease-linear box-border rounded text-color hover:bg-color-100 active:bg-color-200 focus-visible:border-color border border-transparent border-solid pl-2 pr-2" href="https://github.com/lio-mengxiang/mx-design" target="_blank"><svg width="20px" height="20px" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 48 48"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4ZM0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M19.1833 45.4716C18.9898 45.2219 18.9898 42.9973 19.1833 38.798C17.1114 38.8696 15.8024 38.7258 15.2563 38.3667C14.437 37.828 13.6169 36.1667 12.8891 34.9959C12.1614 33.8251 10.5463 33.64 9.89405 33.3783C9.24182 33.1165 9.07809 32.0496 11.6913 32.8565C14.3044 33.6634 14.4319 35.8607 15.2563 36.3745C16.0806 36.8883 18.0515 36.6635 18.9448 36.2519C19.8382 35.8403 19.7724 34.3078 19.9317 33.7007C20.1331 33.134 19.4233 33.0083 19.4077 33.0037C18.5355 33.0037 13.9539 32.0073 12.6955 27.5706C11.437 23.134 13.0581 20.2341 13.9229 18.9875C14.4995 18.1564 14.4485 16.3852 13.7699 13.6737C16.2335 13.3589 18.1347 14.1343 19.4734 16.0001C19.4747 16.0108 21.2285 14.9572 24.0003 14.9572C26.772 14.9572 27.7553 15.8154 28.5142 16.0001C29.2731 16.1848 29.88 12.7341 34.5668 13.6737C33.5883 15.5969 32.7689 18.0001 33.3943 18.9875C34.0198 19.9749 36.4745 23.1147 34.9666 27.5706C33.9614 30.5413 31.9853 32.3523 29.0384 33.0037C28.7005 33.1115 28.5315 33.2855 28.5315 33.5255C28.5315 33.8856 28.9884 33.9249 29.6465 35.6117C30.0853 36.7362 30.117 39.948 29.7416 45.247C28.7906 45.4891 28.0508 45.6516 27.5221 45.7347C26.5847 45.882 25.5669 45.9646 24.5669 45.9965C23.5669 46.0284 23.2196 46.0248 21.837 45.8961C20.9154 45.8103 20.0308 45.6688 19.1833 45.4716Z"></path></svg></a><button class="inline-flex relative items-center justify-center outline-none h-8 text-sm appearance-none select-none cursor-pointer whitespace-nowrap transition-all duration-200 ease-linear box-border rounded text-color hover:bg-color-100 active:bg-color-200 focus-visible:border-color border border-transparent border-solid pl-2 pr-2" type="button"><div class="w-5 h-5 bg-color-200 border border-solid rounded"></div></button></div></nav><main class="flex w-full"><div class="sticky top-[60px] overflow-hidden pt-4 pl-3 border-r border-solid border-color shrink-0 h-[calc(100vh_-_60px)] transition-all duration-300 ease-in-out" style="width:250px"><div class="z-0 h-[calc(100vh-60px)] overflow-auto" style="visibility:visible"><div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-60"><span class="flex items-center"><div style="width:NaNem"></div><svg class="text-[#FBCD2C] mr-2" width="1.4em" height="1.4em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 48 48"><path xmlns="http://www.w3.org/2000/svg" d="M26.285,2.486l5.407,10.956c0.376,0.762,1.103,1.29,1.944,1.412l12.091,1.757  c2.118,0.308,2.963,2.91,1.431,4.403l-8.749,8.528c-0.608,0.593-0.886,1.448-0.742,2.285l2.065,12.042  c0.362,2.109-1.852,3.717-3.746,2.722l-10.814-5.685c-0.752-0.395-1.651-0.395-2.403,0l-10.814,5.685  c-1.894,0.996-4.108-0.613-3.746-2.722l2.065-12.042c0.144-0.837-0.134-1.692-0.742-2.285l-8.749-8.528  c-1.532-1.494-0.687-4.096,1.431-4.403l12.091-1.757c0.841-0.122,1.568-0.65,1.944-1.412l5.407-10.956  C22.602,0.567,25.338,0.567,26.285,2.486z"></path></svg>必读指南</span></div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-60"><span class="flex items-center"><div style="width:NaNem"></div><svg class="text-[#4cc3fa] mr-2" width="1.4em" height="1.4em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 3.542-2.869 3.968-5.512 4.36-1.461.216-2.854.423-3.655 1.14-.846.757-.523 1.895-.227 2.94C13.991 21.8 14.332 23 12 23 5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11zm-2.292-.688a2.062 2.062 0 11-4.125 0 2.062 2.062 0 014.125 0zM14.98 7.876a2.062 2.062 0 100-4.125 2.062 2.062 0 000 4.125zm-4.354-2.063a2.062 2.062 0 11-4.125 0 2.062 2.062 0 014.125 0zm-5.73 7.563a2.062 2.062 0 100-4.125 2.062 2.062 0 000 4.125z"></path></svg>自定义 Modal</span></div><div><div class="hover:bg-color-50 pt-3 pb-3 pl-4 pr-4 cursor-pointer flex justify-between items-center mb-0.5 rounded w-full"><span class="flex items-center gap-x-2"><svg class="text-[#4cc3fa]" width="1.6em" height="1.6em" focusable="false" stroke="currentColor" fill="currentColor" viewBox="0 0 48 48"><path d="M24 4V12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M22 22L42 26L36 30L42 36L36 42L30 36L26 42L22 22Z" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M38.1421 9.85789L32.4853 15.5147" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.85787 38.1421L15.5147 32.4853" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 24H12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.85795 9.85787L15.5148 15.5147" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg> Modal 完整案例</span><svg width="1em" height="1em" focusable="false" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M36 18L24 30L12 18" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><div style="overflow:hidden;height:0px"><div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-full"><span class="flex items-center text-sm font-light"><div style="width:2.4em"></div>传统案例</span></div></div></div></div></div></div><div class="fixed flex items-center justify-center text-lg text-color-500 border border-color-500 rounded-full p-1 bg-color top-56 translate-y-[-50%] cursor-pointer transition-all duration-300 ease-in-out" style="left:236px"><svg width="1em" height="1em" focusable="false" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M31 36L19 24L31 12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="grow shrink basis-0 overflow-hidden mx-16 mt-8 mb-12"><h1 class="font-medium mb-8 text-[36px]" id="我去！modal 组件这么难写你知道吗？">我去！modal 组件这么难写你知道吗？<div class="text-xl font-normal text-color-400">技术难点解析</div></h1>
<div class="w-full h-96 relative mt-8 mb-8 undefined"><img alt="button" loading="lazy" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/react-t-ui/modal/modal.webp"/></div>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="前言">前言</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">很多人对于 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件的第一印象就是一个弹框居中，然后一个黑色蒙层 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">fixed</code> 布局放在后面，感觉很简单啊，但是深入研究各个组件库的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 源码，发现技术细节有很多，不信你就接着看！保证没做过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件的同学不知道。
我简单列一下技术难点,你可以测试一下你用的组件库是否注意这些细节了，欢迎留言讨论！</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="如何处理滚动条">如何处理滚动条</h2>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="为什么要处理滚动条样式？">为什么要处理滚动条样式？</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">首先，一般 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 框弹出的时候，我们是不想页面还能滚动的，这个如何处理？一般情况我们会给 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code>（此时往往会给 modal 设置 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">position: fixed</code>） 或者是你自定义的挂载容器（此时往往会给 modal 设置 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">position: absolute</code>）。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">设置 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">overflow: hidden</code> 样式。但此时又出现一个问题，如果之前有滚动条，<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">overflow: hidden</code> 会导致滚动条消失，滚动条原本就占了一定宽度的，当消失的瞬间，宽度消失，那么意味着容器就会占据这部分消失的空间。
所以布局上就会有 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">抖一下</code> 的感觉。为了不让用户感知到这个过程，我们需要在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 弹出的时候，给 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 或者是你自定义的挂载容器的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">style</code> <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">width</code> 值需要减去滚动条的宽度。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="如何解决嵌套 modal">如何解决嵌套 modal</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">指的是是点击按钮弹出 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 弹窗，弹窗里又有一个按钮，点击之后再之前的基础上又有一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code>，以此类推，嵌套的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 弹窗。</p>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="为什么要处理嵌套 modal？">为什么要处理嵌套 modal？</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">首先数据结构的设计上，最后天然支持多个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 弹窗，例如设计为数组，但还有一个问题，就是刚才我们说了，弹出 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 会给容器处理添加 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">overflow: hidden</code> 样式，以及更改 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">width</code> 值，那么什么时候恢复样式呢？是不是还不能是关闭 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 的时候，
因为有可能是有多个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code>，只有关闭最后一个的时候，才需要恢复容器原先的样式。</p>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="解决方案">解决方案</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这里的解决方案一般有两种，一种是例如 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">material ui</code>，<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">chakra-ui</code>, 小米公司的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件，都是用一个数据结构保存所有 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code>，然后每次关闭一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code>，就去所有 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 里找是否是最后一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code>，如果是最后一个才恢复 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 原本的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">style</code>。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">第二种是字节 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">arco design</code> 的处理方法，还是比较巧妙的，我的组件库也学习了这种方式。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">请看下面的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">useOverflowHidden</code>, 我们详细的看下如何处理隐藏 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 滚动条和恢复的时机和具体方法。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> useEffect</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> useRef </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&quot;react&quot;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> resetContainerStyle</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> setContainerStyle </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&quot;../utils&quot;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span></span><span class="token module" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">useOverflowHidden</span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>  </span><span class="token function-variable" style="color:#DAD085">getContainer</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token maybe-class-name">HTMLElement</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>  </span><span class="token literal-property" style="color:#96CBFE">hidden</span><span class="token" style="color:#EDEDED">:</span><span> boolean
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span></span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span></span><span class="token" style="color:#96CBFE">const</span><span> needResetContainerStyle </span><span class="token" style="color:#EDEDED">=</span><span> useRef </span><span class="token" style="color:#EDEDED">&lt;</span><span> boolean </span><span class="token" style="color:#EDEDED">&gt;</span><span> </span><span class="token" style="color:#99CC99">false</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span></span><span class="token" style="color:#96CBFE">const</span><span> originContainerStyle </span><span class="token" style="color:#EDEDED">=</span><span> useRef </span><span class="token" style="color:#EDEDED">&lt;</span><span> </span><span class="token maybe-class-name">Partial</span><span> </span><span class="token" style="color:#EDEDED">&lt;</span><span> </span><span class="token maybe-class-name">CSSStyleDeclaration</span><span> </span><span class="token" style="color:#EDEDED">&gt;&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span></span><span class="token" style="color:#DAD085">useEffect</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span>  hidden
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span>    </span><span class="token" style="color:#EDEDED">?</span><span> </span><span class="token" style="color:#DAD085">setContainerStyle</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span>        needResetContainerStyle</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span><span>        originContainerStyle</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span><span>        getContainer</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span><span>    </span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#DAD085">resetContainerStyle</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span>        needResetContainerStyle</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span><span>        originContainerStyle</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span><span>        getContainer</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span><span>  </span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span><span>    </span><span class="token" style="color:#DAD085">resetContainerStyle</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25</span><span>      needResetContainerStyle</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26</span><span>      originContainerStyle</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27</span><span>      getContainer</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">29</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">30</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>getContainer</span><span class="token" style="color:#c5c8c6">,</span><span> hidden</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">31</span><span></span><span class="token" style="color:#c5c8c6">}</span></span></code></div></div>
<ul class="list-disc p-0 m-6 space-y-4">
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">getContainer</code> 代码要挂载到 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">html</code> 文档流哪个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">dom</code> 中，我们默认是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 元素中</p>
</li>
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">hidden</code> 是指是否弹框的时候，我们需要黑色蒙层，也就是有时候我们传参不需要这个蒙层，也就意味着我们不想让 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 滚动条消失，所以我们在看到 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 弹框的同时，也能滚动后面的页面，当然，我们这里大家可以看为是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">true</code>，我们是需要黑色蒙层的</p>
</li>
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">needResetContainerStyle</code> 用来记录是否重置 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">style</code> 样式，只有调用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">setContainerStyle</code> 方法后，并且是第一个触发的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 框，这个值才会是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">true</code></p>
</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们马上看下 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">setContainerStyle</code>，也就是设置 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 滚动条隐藏的函数：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> getScrollBarWidth </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&quot;./getScrollBarWidth&quot;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#7C7C7C">/**
</span></span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span>* Hides the container&#x27;s scroll bar
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span class="token" style="color:#7C7C7C">*/</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span></span><span class="token module" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token function-variable" style="color:#DAD085">setContainerStyle</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter" style="color:#c5c8c6">{</span><span class="token parameter">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span class="token parameter">  getContainer</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span class="token parameter">  needResetContainerStyle</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span class="token parameter">  originContainerStyle</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span class="token parameter"></span><span class="token parameter" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> container </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">getContainer</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span><span>  </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>container </span><span class="token" style="color:#EDEDED">&amp;&amp;</span><span> container</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">style</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">overflow</span><span> </span><span class="token" style="color:#EDEDED">!==</span><span> </span><span class="token" style="color:#A8FF60">&quot;hidden&quot;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span>    </span><span class="token" style="color:#7C7C7C">/**
</span></span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span>    * @zh 记录container的style属性, 因为后续要将container.style.overflow设为hidden
</span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span>    * @en Record the container&#x27;s style property, because I&#x27;ll set container.style.overflow to hidden later
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span><span class="token" style="color:#7C7C7C">    */</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> originStyle </span><span class="token" style="color:#EDEDED">=</span><span> container</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">style</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span>    </span><span class="token" style="color:#7C7C7C">/**
</span></span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span>    * @zh 记录是否 container.style.overflow 被覆盖为hidden
</span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span>    * @en Note whether container.style.overflow is overwritten as hidden
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span class="token" style="color:#7C7C7C">    */</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span><span>    needResetContainerStyle</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#99CC99">true</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> containerScrollBarWidth </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">getScrollBarWidth</span><span class="token" style="color:#c5c8c6">(</span><span>container</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26</span><span>    </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>containerScrollBarWidth</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27</span><span>      originContainerStyle</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">width</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> originStyle</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">width</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28</span><span>      container</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">style</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">width</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token template-string" style="color:#A8FF60">calc(</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">${</span><span class="token template-string interpolation">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">29</span><span class="token template-string interpolation">        container</span><span class="token template-string interpolation" style="color:#c5c8c6">.</span><span class="token template-string interpolation property-access">style</span><span class="token template-string interpolation" style="color:#c5c8c6">.</span><span class="token template-string interpolation property-access">width</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation" style="color:#EDEDED">||</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation" style="color:#A8FF60">&quot;100%&quot;</span><span class="token template-string interpolation">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">30</span><span class="token template-string interpolation">      </span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">}</span><span class="token template-string" style="color:#A8FF60"> - </span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">${</span><span class="token template-string interpolation">containerScrollBarWidth</span><span class="token template-string interpolation interpolation-punctuation" style="color:#c5c8c6">}</span><span class="token template-string" style="color:#A8FF60">px)</span><span class="token template-string template-punctuation" style="color:#A8FF60">`</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">31</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">32</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">33</span><span>    </span><span class="token" style="color:#7C7C7C">/**
</span></span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">34</span>    * @zh 设置container的overflow为hidden
</span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">35</span>    * @en Set container overflow to hidden
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">36</span><span class="token" style="color:#7C7C7C">    */</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">37</span><span>    originContainerStyle</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">overflow</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> originStyle</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">overflow</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">38</span><span>    container</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">style</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">overflow</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#A8FF60">&quot;hidden&quot;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">39</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">40</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">上面的重点有两部分</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>需要将 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">container</code> (默认是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">body</code> 元素) 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">style.overflow</code> 设置为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">hidden</code>。<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">needResetContainerStyle</code> 也记录下，已经设置过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">container</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">style.overflow</code> 样式了用来后续还原样式。</li>
<li>需要记录下 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">container</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">width</code> 设置的值减去滚动条的宽度。因为如果不减去滚动条宽度，那么当 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">container</code> 的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">width</code> 减小了，视觉上会有抖动，这是个很细的交互细节。</li>
</ul>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="如何锁定焦点">如何锁定焦点</h2>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="什么是锁定焦点">什么是锁定焦点</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">当你打开 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 的时候，在键盘上按下 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">tab</code> 键，会出现 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">button</code> 元素 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">focus</code> 的状态。</p>
<div class="w-full h-96 relative mt-8 mb-8 undefined"><img alt="modal focus" loading="lazy" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/react-t-ui/modal/focus.jpg"/></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">上图所示的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">focus</code> 状态，会在你按下回车键的时候触发这个按钮的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onClick</code> 事件。而且你一直按 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Tab</code> 键，焦点只会在当前 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Modal</code> 框里，不会移除到 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Modal</code> 框外，这种 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">focus</code> 状态锁定技术是需要解决的。
并且有些同学可能不了解 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">tabIndex</code>,有兴趣的同学可以搜索一下，通过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">tabIndex</code>,我们可以让关闭按钮，也就是右上角的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">x</code> 也能获取焦点，我的组件库并没有处理这个细节，是因为按 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ESC</code> 键就可以关闭弹窗，这样做我感觉多此一举。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">在网页中，模态框（Modal）、弹出层（Dialog）等组件出现时，通常希望用户的键盘焦点始终被限制在这个弹出层内部，防止按下 Tab 键后焦点跳出模态框、误操作到页面其他区域。这种机制被称为 “焦点陷阱（Focus Trap）”。</p>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="解决方案">解决方案</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们会用一段简单的代码来实现这个功能。后面会有详细的讲解。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">createFocusTrap</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">element</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#96CBFE">const</span><span> focusableElements </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token known-class-name" style="color:#FFFFB6;text-decoration:underline">Array</span><span class="token" style="color:#c5c8c6">.</span><span class="token module" style="color:#96CBFE">from</span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span>  element</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">querySelectorAll</span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>    </span><span class="token" style="color:#A8FF60">&#x27;a[href], button, input, select, textarea, [tabindex]:not([tabindex=&quot;-1&quot;])&#x27;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span></span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span></span><span class="token" style="color:#96CBFE">let</span><span> firstFocusableElement </span><span class="token" style="color:#EDEDED">=</span><span> focusableElements</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span></span><span class="token" style="color:#96CBFE">let</span><span> lastFocusableElement </span><span class="token" style="color:#EDEDED">=</span><span> focusableElements</span><span class="token" style="color:#c5c8c6">[</span><span>focusableElements</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#EDEDED">-</span><span> </span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span></span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">handleKeyDown</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">event</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span><span>  </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>event</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">key</span><span> </span><span class="token" style="color:#EDEDED">===</span><span> </span><span class="token" style="color:#A8FF60">&quot;Tab&quot;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span>    </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>event</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">shiftKey</span><span> </span><span class="token" style="color:#EDEDED">&amp;&amp;</span><span> </span><span class="token dom" style="color:#C6C5FE">document</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">activeElement</span><span> </span><span class="token" style="color:#EDEDED">===</span><span> firstFocusableElement</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span>      event</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">preventDefault</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span><span>      lastFocusableElement</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">focus</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token control-flow" style="color:#96CBFE">else</span><span> </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span><span>      </span><span class="token" style="color:#EDEDED">!</span><span>event</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">shiftKey</span><span> </span><span class="token" style="color:#EDEDED">&amp;&amp;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span><span>      </span><span class="token dom" style="color:#C6C5FE">document</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">activeElement</span><span> </span><span class="token" style="color:#EDEDED">===</span><span> lastFocusableElement
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span>    </span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span><span>      event</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">preventDefault</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span><span>      firstFocusableElement</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">focus</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26</span><span>element</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">addEventListener</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&quot;keydown&quot;</span><span class="token" style="color:#c5c8c6">,</span><span> handleKeyDown</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27</span><span>element</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">focus</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28</span><span></span><span class="token" style="color:#c5c8c6">}</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这段代码的核心目标，就是在指定的容器元素中创建这样一个焦点陷阱，让用户在使用键盘 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Tab</code> 或 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Shift + Tab</code> 切换焦点时，始终在容器内循环切换焦点。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">核心分为三部分：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">找到容器内所有可聚焦的元素
通过选择器筛选出 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">a</code>、<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">button</code>、<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code>、<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">select</code>、<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">textarea</code> 等常见可聚焦元素，以及显式设置了 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">tabindex</code> 的元素，并将它们存入数组中，方便后续处理。</p>
</li>
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">记录首尾焦点节点
取出第一个和最后一个可聚焦元素，分别用于判断焦点循环的“边界条件”。</p>
</li>
<li>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">拦截键盘事件，实现循环焦点
监听容器的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">keydown</code> 事件。当用户按下 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Tab</code> 键：
如果是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Shift + Tab</code> 且当前焦点在第一个元素上，就阻止默认行为，让焦点跳到最后一个元素；
如果是普通 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Tab</code> 且当前焦点在最后一个元素上，就跳回第一个元素。
这样就实现了焦点在容器内部首尾循环，形成“焦点陷阱”。</p>
</li>
</ul>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="难点：支持函数调用">难点：支持函数调用</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">很多弹窗类的组件，在实际业务中，很多都是点击事件触发，或者某个用户触发交互事件触发的，而这些交互事件往往是回调函数的形式存在。
那么这些弹窗如果能是函数调用的方式弹出，就会非常方便。例如：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>Modal.add 增加 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件</li>
<li>Modal.remove 关闭 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件</li>
<li>Modal.update 更新 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件</li>
<li>Modal.removeAll 关闭所有 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">也就是再也不用如下的调用方式了：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#FFFFB6;text-decoration:underline">Modal</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#c5c8c6">/&gt;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">而是：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token maybe-class-name">Modal</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">add</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token spread" style="color:#EDEDED">...</span><span>xxx参数 </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="支持自定义 modal">支持自定义 modal</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们最终支持通过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">content</code> 属性传入自定义的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件。例如：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token maybe-class-name">Modal</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">add</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token literal-property" style="color:#96CBFE">content</span><span class="token" style="color:#EDEDED">:</span><span> xx传入自定义的 </span><span class="token maybe-class-name">Modal</span><span> 组件 </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这时候就有问题了，我们的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Modal.add</code> 如何给这个自定义 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件传入参数呢？然后 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Modal.update</code> 更新参数的时候，还能自动更新传入到 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">content</code> 组件中？
我采取了一个比较简单的方式，借助 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">React.cloneElement</code> 方法。类似于：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token maybe-class-name">React</span><span class="token" style="color:#c5c8c6">.</span><span class="token method property-access" style="color:#DAD085">cloneElement</span><span class="token" style="color:#c5c8c6">(</span><span>content</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> contentProps </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">也就是在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Modal.add</code> 方法中传入了 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">contentProps</code> 参数会自动透传给 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">content</code> 组件。从而达到函数调用的方式传入参数的效果。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="其它技术难点">其它技术难点</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">其实还有很多细节，例如：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>如何设计第一次获得焦点的元素。（有些表单想打开的时候，某个元素获得焦点）</li>
<li>嵌套 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 设计，例如：一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件中再嵌套一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件，这个时候我们需要注意什么问题？</li>
<li>如何处理 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件的关闭事件。（例如：点击关闭按钮、点击蒙层、按下 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ESC</code> 键）</li>
<li>等等</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">所有关于 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件的技术难点，欢迎加入到我们的组件库交流群中。有什么疑问都可以在群里讨论，并且会有视频直播每个组件的实现。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">更重要的是,我可以帮助你增加一些简历中的核心项目，例如我们这个组件库级别的。无论你是面试初级开发还是到前端技术专家，都会帮助你在面试中脱颖而出。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="附录">附录</h2>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="安装 modal">安装 modal</h3>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-bash" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#DAD085">npm</span><span> i @t-headless-ui/react
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#DAD085">yarn</span><span> i @t-headless-ui/react
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#DAD085">pnpm</span><span> i @t-headless-ui/react</span></span></code></div></div>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="引入和使用 modal">引入和使用 modal</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件跟别的组件不太一样，首先需要你调用创建一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">store</code> 实例：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-tsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> createModalStore </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@t-headless-ui/react&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#96CBFE">const</span><span> modalStore </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">createModalStore</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">目的是用这个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">store</code> 来管理 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件的状态，例如添加、删除、更新 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件的状态。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">然后引入 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ModalProvider</code> 组件，将 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">store</code> 实例作为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">prop</code> 传递给 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ModalProvider</code> 组件。<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ModalProvider</code> 组件一般放在你的项目的入口文件中，
例如 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">App.tsx</code> 或者 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">App.jsx</code> 文件。目的是初始化 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Modal</code> 组件（其背后默认会在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">document.body</code> 创建一个可以出现 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 信息框），当然我们也支持自定义插入
到某个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">dom</code> 元素中，一般情况使用默认的即可。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-tsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ModalProvider</span><span class="token imports"> </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@t-headless-ui/react&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#FFFFB6;text-decoration:underline">ModalProvider</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#A8FF60">store</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">modalStore</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#c5c8c6">/&gt;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ModalProvider</code> 支持传入一些全局参数，包括：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">maskCls</code>：指定 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件蒙层的类名。</li>
<li><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">maskStyle</code>：指定 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件蒙层的样式。</li>
<li><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">focusLock</code>: 是否开启焦点锁定。默认是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">true</code>。</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">以上参数也可以在使用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Modal.add</code> 方法时单独传入，会覆盖 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ModalProvider</code> 组件的全局参数。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">最后，就可以引入 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modalStore</code> 开始调用了：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-tsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#96CBFE">button</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#A8FF60">onClick</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript arrow" style="color:#96CBFE">=&gt;</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span class="token script language-javascript" style="color:#96CBFE">  modalStore</span><span class="token script language-javascript" style="color:#c5c8c6">.</span><span class="token script language-javascript method property-access" style="color:#96CBFE">add</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span class="token script language-javascript" style="color:#96CBFE">    content</span><span class="token script language-javascript" style="color:#EDEDED">:</span><span class="token script language-javascript" style="color:#96CBFE"> xxx 自己封装的 </span><span class="token script language-javascript maybe-class-name" style="color:#96CBFE">Modal</span><span class="token script language-javascript" style="color:#96CBFE"> 组件</span><span class="token script language-javascript" style="color:#c5c8c6">,</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span class="token script language-javascript" style="color:#96CBFE">  </span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span class="token script language-javascript" style="color:#96CBFE"></span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#c5c8c6">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span>open modal
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span class="token plain-text"></span><span class="token" style="color:#c5c8c6">&lt;/</span><span class="token" style="color:#96CBFE">button</span><span class="token" style="color:#c5c8c6">&gt;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">因为我们的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">modal</code> 组件是一个 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">headless</code> 组件，所以弹出的内容完全是自定义的，在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Alert</code> 组件中，我们提供了一个简单的样例，大家可以去参考一下。</p></div><div class="hidden z-10 xl:flex xl:w-48 mt-8 pl-0 shrink-0"><div class="sticky top-[90px] overflow-y-auto h-[calc(100vh-100px)]"><div data-target-id="前言"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">前言</div></div><div data-target-id="如何处理滚动条"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">如何处理滚动条</div><div data-target-id="为什么要处理滚动条样式？"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">为什么要处理滚动条样式？</div></div></div><div data-target-id="如何解决嵌套 modal"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">如何解决嵌套 modal</div><div data-target-id="为什么要处理嵌套 modal？"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">为什么要处理嵌套 modal？</div></div><div data-target-id="解决方案"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">解决方案</div></div></div><div data-target-id="如何锁定焦点"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">如何锁定焦点</div><div data-target-id="什么是锁定焦点"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">什么是锁定焦点</div></div><div data-target-id="解决方案"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">解决方案</div></div></div><div data-target-id="难点：支持函数调用"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">难点：支持函数调用</div></div><div data-target-id="支持自定义 modal"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">支持自定义 modal</div></div><div data-target-id="其它技术难点"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">其它技术难点</div></div><div data-target-id="附录"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">附录</div><div data-target-id="安装 modal"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">安装 modal</div></div><div data-target-id="引入和使用 modal"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">引入和使用 modal</div></div></div></div></div><!--$--><!--/$--></main></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[40104,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ClientSegmentRoot\"]\n3:I[97688,[\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\"],\"default\"]\n4:I[65932,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"default\"]\n5:I[20542,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"default\"]\n7:I[43365,[\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\",\"/react-t-ui/_next/static/chunks/59d6bf74fd348050.js\",\"/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js\"],\"default\"]\n9:I[87039,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ClientPageRoot\"]\na:I[77879,[\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\",\"/react-t-ui/_next/static/chunks/59d6bf74fd348050.js\",\"/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js\",\"/react-t-ui/_next/static/chunks/37f7359b649c8f51.js\",\"/react-t-ui/_next/static/chunks/6119c141ed8a8242.js\"],\"default\"]\nd:I[6861,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"OutletBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[6861,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ViewportBoundary\"]\n12:I[6861,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"MetadataBoundary\"]\n14:I[56272,[],\"default\"]\n:HL[\"/react-t-ui/_next/static/chunks/c57f25d7aa6d6db9.css\",\"style\"]\n:HL[\"/react-t-ui/_next/static/chunks/ec8a10aa2b532d44.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"JCsUNHoMPKLZv5brQoUut\",\"c\":[\"\",\"modal\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"modal\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/react-t-ui/_next/static/chunks/c57f25d7aa6d6db9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/react-t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/react-t-ui/_next/static/chunks/ef5d1ddf31034dc0.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/react-t-ui/_next/static/chunks/f129c4ead9cc822c.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$3\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"serverProvidedParams\":{\"params\":{},\"promises\":[\"$@6\"]}}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/react-t-ui/_next/static/chunks/59d6bf74fd348050.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/react-t-ui/_next/static/chunks/1ebf659cd03b1565.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$7\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"serverProvidedParams\":{\"params\":\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\",\"promises\":[\"$@8\"]}}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L9\",null,{\"Component\":\"$a\",\"serverProvidedParams\":{\"searchParams\":{},\"params\":\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\",\"promises\":[\"$@b\",\"$@c\"]}}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/react-t-ui/_next/static/chunks/ec8a10aa2b532d44.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/react-t-ui/_next/static/chunks/37f7359b649c8f51.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/react-t-ui/_next/static/chunks/6119c141ed8a8242.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@f\"}]}]]}],{},null,false,false]},null,false,false]},[[\"$\",\"div\",\"l\",{\"className\":\"flex items-center justify-center h-screen bg-white\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-70\"}]}],[],[]],false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L10\",null,{\"children\":\"$@11\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@13\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$14\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"6:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\n8:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\nb:{}\nc:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"15:I[83528,[\"/react-t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/react-t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"IconMark\"]\n13:[[\"$\",\"link\",\"0\",{\"rel\":\"icon\",\"href\":\"/react-t-ui/favicon.ico?favicon.176b088f.ico\",\"sizes\":\"128x128\",\"type\":\"image/x-icon\"}],[\"$\",\"$L15\",\"1\",{}]]\nf:null\n"])</script></body></html>