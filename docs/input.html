<!DOCTYPE html><!--rCCpH5bWYoOEh0RMrEWFu--><html lang="zh"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/t-ui/_next/static/chunks/c57f25d7aa6d6db9.css" data-precedence="next"/><link rel="stylesheet" href="/t-ui/_next/static/chunks/ec8a10aa2b532d44.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/t-ui/_next/static/chunks/b7d1a55b3ef39bbc.js"/><script src="/t-ui/_next/static/chunks/d73d48e9c9019a53.js" async=""></script><script src="/t-ui/_next/static/chunks/58e91072423a7497.js" async=""></script><script src="/t-ui/_next/static/chunks/619b8494be332a80.js" async=""></script><script src="/t-ui/_next/static/chunks/turbopack-3398aa5b1c6b1faa.js" async=""></script><script src="/t-ui/_next/static/chunks/d821eddc5a83a14d.js" async=""></script><script src="/t-ui/_next/static/chunks/a45895e8a6f72ee9.js" async=""></script><script src="/t-ui/_next/static/chunks/07a06d645a86c72b.js" async=""></script><script src="/t-ui/_next/static/chunks/b23f918aef2ac772.js" async=""></script><script src="/t-ui/_next/static/chunks/1b0efe442c7186ad.js" async=""></script><script src="/t-ui/_next/static/chunks/54244e63fe228010.js" async=""></script><script src="/t-ui/_next/static/chunks/1ebf659cd03b1565.js" async=""></script><script src="/t-ui/_next/static/chunks/d1e1b740c0d4e268.js" async=""></script><script src="/t-ui/_next/static/chunks/1ec246868d6b1088.js" async=""></script><title>组件库教程社区</title><meta name="author" content="孟祥同学"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="前端动效成长社区，分享前端动效相关的知识和经验，包括 gsap、motion、three.js 等。"/><meta name="keywords" content="&#x27;前端动效&#x27;, &#x27;前端&#x27;, &#x27;前端动画课程&#x27;, &#x27;前端动画课&#x27;, &#x27;前端动画教程&#x27;, &#x27;前端动画社区&#x27;, &#x27;动效&#x27;, &#x27;gsap&#x27;, &#x27;react gsap&#x27;, &#x27;vue gsap&#x27;, &#x27;next gsap&#x27;, &#x27;gsap 3&#x27;, &#x27;motion&#x27;, &#x27;framer-motion&#x27;, &#x27;vue motion&#x27;, &#x27;vue framer-motion&#x27;, &#x27;next motion&#x27;, &#x27;react motion&#x27;, &#x27;three.js&#x27;, &#x27;threejs 动画&#x27;, &#x27;blender&#x27;, &#x27;blender 动画&#x27;, &#x27;react-three-fiber&#x27;, &#x27;three.js 动画&#x27;, &#x27;three.js 3d&#x27;"/><link rel="icon" href="/t-ui/favicon.ico?favicon.176b088f.ico" sizes="128x128" type="image/x-icon"/><script src="/t-ui/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="text-color bg-color font-sans"><div hidden=""><!--$--><!--/$--></div><script>
   ((a,b)=>{let c=localStorage.getItem(b)||a;localStorage.setItem(b,c),document.documentElement.setAttribute("class",c)})('light', 'theme');
  </script><!--$?--><template id="B:0"></template><div class="flex items-center justify-center h-screen bg-white"><div class="animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-70"></div></div><!--/$--><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/t-ui/_next/static/chunks/b7d1a55b3ef39bbc.js" id="_R_" async=""></script><div hidden id="S:0"><div class="px-6 py-2 bg-gradient-to-r from-pink-500/15 via-purple-500/10 to-blue-500/15 text-[#9b8691] flex justify-center text-sm">组件仍在补充, 欢迎加群交流哦，微信: a2298613245</div><nav class="sticky top-0 w-full flex justify-between items-center pl-6 pr-6 h-16 border-b border-solid border-color bg-color z-[999]"><div class="text-sm flex cursor-pointer items-center"><svg class="text-4xl" width="1em" height="1em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 300 300"><g filter="url(#filter0_dddi_801_107)"><path d="M8.34992 62.1685L12.5726 37.1704C15.4175 20.3286 30.0033 8 47.0837 8H251.245C263.762 8 273.204 19.369 270.904 31.6738L266.839 53.4291C263.744 69.993 249.285 82 232.435 82H182.535C177.284 82 172.765 85.7115 171.744 90.8625L138.384 259.273C134.674 278.004 118.241 291.5 99.1464 291.5H96.5109C78.8888 291.5 65.6476 275.416 69.0322 258.122L101.4 92.7285C102.488 87.1698 98.2322 82 92.5679 82H25.1124C14.5924 82 6.5977 72.5416 8.34992 62.1685Z" fill="url(#paint0_linear_801_107)"></path></g><defs><filter id="filter0_dddi_801_107" x="0.10791" y="0" width="295.143" height="315.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="2" dy="2"></feOffset><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.235294 0 0 0 0 0.607843 0 0 0 0 0.882353 0 0 0 1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_801_107"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="12" dy="12"></feOffset><feGaussianBlur stdDeviation="6"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="effect1_dropShadow_801_107" result="effect2_dropShadow_801_107"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="4" dy="4"></feOffset><feGaussianBlur stdDeviation="6"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="effect2_dropShadow_801_107" result="effect3_dropShadow_801_107"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect3_dropShadow_801_107" result="shape"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dx="-1" dy="-1"></feOffset><feGaussianBlur stdDeviation="1"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.14 0"></feColorMatrix><feBlend mode="normal" in2="shape" result="effect4_innerShadow_801_107"></feBlend></filter><linearGradient id="paint0_linear_801_107" x1="86.5" y1="8" x2="140" y2="259" gradientUnits="userSpaceOnUse"><stop stop-color="#6CC5FB"></stop><stop offset="1" stop-color="#4DADEE"></stop></linearGradient></defs></svg><span class="text-xl mt-[6px] text-nowrap">headless <span class="text-primary-hover dark:text-[#4cc3fa]">ui</span></span></div><div class="flex gap-x-2 items-center"><div class="mr-2"><div class="hover:bg-slate-50 px-2 py-0.5 text-sm border border-color rounded-lg"><div class="cursor-pointer"><div style="overflow:hidden;display:flex;flex-direction:column"><div style="display:flex"><span class="line1">导</span><span class="line1"> </span><span class="line1">航</span></div></div></div></div><div class="menu-overlay fixed top-0 left-0 w-screen h-screen px-6 py-5 bg-[#f6c646] z-[2] flex" style="clip-path:polygon(0 0, 100% 0, 100% 0, 0 0)"><div class="absolute group bottom-20 left-1/2 g active:text-slate-400 px-4 py-2 rounded-md cursor-pointer w-7 h-7 flex justify-center items-center bg-[#0a0a0a] text-[#f5c747]"><div class="group-hover:rotate-180 duration-300">✕</div></div><div class="mt-2 px-12 w-full font-geist-sans"><div class="text-[#fff99f] mb-10">组件还在补充中，希望能够帮助你有一个亮点项目放入简历！</div><div class="md:w-1/4 w-full text-[#191919]"><div class="h-[1px] w-full bg-[#5f5635] overflow-hidden mb-[6px]"></div><div class="px-1"><div class="text-base text-black/40"></div><div class="mt-[24px]"><div class="text-xl tracking-wide cursor-pointer "><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">全局方案</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">按钮 Button</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">图标 Icon</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">布局 Grid</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">间距 Space</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">输入框 Input</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">弹窗 Modal</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">弹出框 Popover</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">消息 Toast</span></div><div class="text-xl tracking-wide cursor-pointer mt-3"><span class="relative after:absolute after:bg-black after:bottom-[-2px] after:left-0 after:h-[2px] after:w-full after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:ease-in-out after:duration-300">警告 Alert</span></div></div></div></div></div></div></div><a class="inline-flex relative items-center justify-center outline-none h-8 text-sm appearance-none select-none cursor-pointer whitespace-nowrap transition-all duration-200 ease-linear box-border rounded text-color hover:bg-color-100 active:bg-color-200 focus-visible:border-color border border-transparent border-solid pl-2 pr-2" href="https://github.com/lio-mengxiang/t-ui" target="_blank"><svg width="20px" height="20px" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 48 48"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4ZM0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M19.1833 45.4716C18.9898 45.2219 18.9898 42.9973 19.1833 38.798C17.1114 38.8696 15.8024 38.7258 15.2563 38.3667C14.437 37.828 13.6169 36.1667 12.8891 34.9959C12.1614 33.8251 10.5463 33.64 9.89405 33.3783C9.24182 33.1165 9.07809 32.0496 11.6913 32.8565C14.3044 33.6634 14.4319 35.8607 15.2563 36.3745C16.0806 36.8883 18.0515 36.6635 18.9448 36.2519C19.8382 35.8403 19.7724 34.3078 19.9317 33.7007C20.1331 33.134 19.4233 33.0083 19.4077 33.0037C18.5355 33.0037 13.9539 32.0073 12.6955 27.5706C11.437 23.134 13.0581 20.2341 13.9229 18.9875C14.4995 18.1564 14.4485 16.3852 13.7699 13.6737C16.2335 13.3589 18.1347 14.1343 19.4734 16.0001C19.4747 16.0108 21.2285 14.9572 24.0003 14.9572C26.772 14.9572 27.7553 15.8154 28.5142 16.0001C29.2731 16.1848 29.88 12.7341 34.5668 13.6737C33.5883 15.5969 32.7689 18.0001 33.3943 18.9875C34.0198 19.9749 36.4745 23.1147 34.9666 27.5706C33.9614 30.5413 31.9853 32.3523 29.0384 33.0037C28.7005 33.1115 28.5315 33.2855 28.5315 33.5255C28.5315 33.8856 28.9884 33.9249 29.6465 35.6117C30.0853 36.7362 30.117 39.948 29.7416 45.247C28.7906 45.4891 28.0508 45.6516 27.5221 45.7347C26.5847 45.882 25.5669 45.9646 24.5669 45.9965C23.5669 46.0284 23.2196 46.0248 21.837 45.8961C20.9154 45.8103 20.0308 45.6688 19.1833 45.4716Z"></path></svg></a><button class="inline-flex relative items-center justify-center outline-none h-8 text-sm appearance-none select-none cursor-pointer whitespace-nowrap transition-all duration-200 ease-linear box-border rounded text-color hover:bg-color-100 active:bg-color-200 focus-visible:border-color border border-transparent border-solid pl-2 pr-2" type="button"><div class="w-5 h-5 bg-color-200 border border-solid rounded"></div></button></div></nav><main class="flex w-full"><div class="sticky top-[60px] overflow-hidden pt-4 pl-3 border-r border-solid border-color shrink-0 h-[calc(100vh_-_60px)] transition-all duration-300 ease-in-out" style="width:250px"><div class="z-0 h-[calc(100vh-60px)] overflow-auto" style="visibility:visible"><div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-60"><span class="flex items-center"><div style="width:NaNem"></div><svg class="text-[#FBCD2C] mr-2" width="1.4em" height="1.4em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 48 48"><path xmlns="http://www.w3.org/2000/svg" d="M26.285,2.486l5.407,10.956c0.376,0.762,1.103,1.29,1.944,1.412l12.091,1.757  c2.118,0.308,2.963,2.91,1.431,4.403l-8.749,8.528c-0.608,0.593-0.886,1.448-0.742,2.285l2.065,12.042  c0.362,2.109-1.852,3.717-3.746,2.722l-10.814-5.685c-0.752-0.395-1.651-0.395-2.403,0l-10.814,5.685  c-1.894,0.996-4.108-0.613-3.746-2.722l2.065-12.042c0.144-0.837-0.134-1.692-0.742-2.285l-8.749-8.528  c-1.532-1.494-0.687-4.096,1.431-4.403l12.091-1.757c0.841-0.122,1.568-0.65,1.944-1.412l5.407-10.956  C22.602,0.567,25.338,0.567,26.285,2.486z"></path></svg>必读指南</span></div><div><div class="hover:bg-color-50 pt-3 pb-3 pl-4 pr-4 cursor-pointer flex justify-between items-center mb-0.5 rounded w-full"><span class="flex items-center gap-x-2"><svg class="text-[#4cc3fa]" width="1.4em" height="1.4em" focusable="false" stroke="none" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 3.542-2.869 3.968-5.512 4.36-1.461.216-2.854.423-3.655 1.14-.846.757-.523 1.895-.227 2.94C13.991 21.8 14.332 23 12 23 5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11zm-2.292-.688a2.062 2.062 0 11-4.125 0 2.062 2.062 0 014.125 0zM14.98 7.876a2.062 2.062 0 100-4.125 2.062 2.062 0 000 4.125zm-4.354-2.063a2.062 2.062 0 11-4.125 0 2.062 2.062 0 014.125 0zm-5.73 7.563a2.062 2.062 0 100-4.125 2.062 2.062 0 000 4.125z"></path></svg> 如何自定义 Input</span><svg width="1em" height="1em" focusable="false" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M36 18L24 30L12 18" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><div style="overflow:hidden;height:0px"><div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-full"><span class="flex items-center text-sm font-light"><div style="width:2.4em"></div>CSS / Less / Sass Input</span></div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-full"><span class="flex items-center text-sm font-light"><div style="width:2.4em"></div>Tailwind Input</span></div></div></div></div><div><div class="hover:bg-color-50 pt-3 pb-3 pl-4 pr-4 cursor-pointer flex justify-between items-center mb-0.5 rounded w-full"><span class="flex items-center gap-x-2"><svg class="text-[#4cc3fa]" width="1.6em" height="1.6em" focusable="false" stroke="currentColor" fill="currentColor" viewBox="0 0 48 48"><path d="M24 4V12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M22 22L42 26L36 30L42 36L36 42L30 36L26 42L22 22Z" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M38.1421 9.85789L32.4853 15.5147" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.85787 38.1421L15.5147 32.4853" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 24H12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.85795 9.85787L15.5148 15.5147" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg> Input 完整案例</span><svg width="1em" height="1em" focusable="false" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M36 18L24 30L12 18" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><div style="overflow:hidden;height:0px"><div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-full"><span class="flex items-center text-sm font-light"><div style="width:2.4em"></div>传统案例</span></div><div class="pt-3 pb-3 pl-4 pr-4 hover:bg-color-50  cursor-pointer rounded mb-1 w-full"><span class="flex items-center text-sm font-light"><div style="width:2.4em"></div>创意案例</span></div></div></div></div></div></div><div class="fixed flex items-center justify-center text-lg text-color-500 border border-color-500 rounded-full p-1 bg-color top-56 translate-y-[-50%] cursor-pointer transition-all duration-300 ease-in-out" style="left:236px"><svg width="1em" height="1em" focusable="false" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M31 36L19 24L31 12" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="grow shrink basis-0 overflow-hidden mx-16 mt-8 mb-12"><h1 class="font-medium mb-8 text-[36px]" id="探索 React 中文输入下的惊人问题，你绝对不能错过！">探索 React 中文输入下的惊人问题，你绝对不能错过！<div class="text-xl font-normal text-color-400">Input 组件难点解析</div></h1>
<div class="w-full h-96 relative mt-8 mb-8 undefined"><img alt="input" loading="lazy" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/t-ui/input/input.webp"/></div>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="前言">前言</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Input</code> 组件大家都用过，是吧，但是你有没有想过这样一个场景，如下图，我正在搜索数据</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">同时组件上注册了 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件，然后边输入，底下会显示你搜索相关的内容，</p>
<div class="w-full h-96 relative mt-8 mb-8 undefined"><img alt="input" loading="lazy" decoding="async" data-nimg="fill" class="object-contain" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/t-ui/input/example1.webp"/></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">但是有一个问题，输入中文的时候，比如你输入三国的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">三</code> 字，要先输入 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">san</code> 然后才出现汉字 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">三</code></p>
<div class="w-full relative mt-8 mb-8 h-[200px]"><img alt="input" loading="lazy" width="400" height="200" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="/t-ui/input/example2.webp"/></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">可问题来了，<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件监听的是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">san</code>，只要 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件触发，就会开始向后端请求数据，那么输入 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">san</code> 意味着，在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">s</code>, <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">sa</code> 和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">san</code> 的时候，分别发了三次请求。
其实我们根本不想这样，我们想的是等中文显示在输入框，也就是输入完 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">三</code> 这个字的时候才搜索。加上请求后端接口本身就是异步的，意味着 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">s</code>, <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">sa</code> 和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">san</code> 三个请求发出去，返回的顺序也不一定，所以这是一个很严重的问题。
异步问题我们暂且不谈，一般用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">debounce</code> 去解决，这种方式不是治本的，我建议最好上 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">rxjs</code>(或者自己封装一个能取消之前请求操作的工具函数)来从根上解决这个问题。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="解决方案">解决方案</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">这种问题在英文输入法是没有任务问题的，所以参考国外的组件库是不行的，拿国内来说</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>阿里的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ant design</code>、字节的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">semi design</code> 是完全不管这个问题的，所以你在远程搜索的时候，交互很糟糕</li>
<li>腾讯的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">tdesign</code> 处理了此问题，但在非 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">chrome</code> 浏览器下，会触发两次 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> ,也就是中文输入会执行两次远程搜索，我觉得这个体验也不好，但起码用户侧能轻松解决，就是对比两次搜索值是否相同，不同才去搜索</li>
<li>字节 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">arco design</code> 完美解决这个问题</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">现在我们把这个问题的解决思路先描述一下。这里涉及到两个事件 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Compositionstart</code> 和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Compositionend</code> 事件。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="Composition 事件">Composition 事件</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们主要借助 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Composition</code> 事件中的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionstart</code> 和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code> 事件来解决这个问题。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionstart</code> 事件在用户开始进行非直接输入的时候触发（非直接输入就是上面提到的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">san</code> 这个过程），而在非直接输入结束，也即用户点选候选词或者点击 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">选定</code> 按钮之后，比如按 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">回车键</code>，会触发 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code> 事件。
举个例子，还是上面输入三这个字的过程，当你输入 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">s</code> 的时候，已经打开了中文输入法，此时 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionstart</code> 事件触发了，当你输入完三并且确认的时候，<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code>事件触发。
还有一个<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionupdate</code>事件， 此事件触发于字符被输入到一段文字的时候，如在用户开始输入拼音到确定结束的过程都会触发该事件。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">所以说<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionstart</code>与<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code>都只会会被触发一次，而<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionupdate</code>则是有可能多次触发。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="受控和非受控组件">受控和非受控组件</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">讲后面的知识点之前，我们需要铺垫一个基础知识，就是了解什么是 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">受控</code> 和 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">非受控组件</code>。我们就那 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code> 组件举例。</p>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="受控组件">受控组件</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">受控组件的值是由 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">React</code> 来管理的，每次输入触发 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token maybe-class-name" style="color:#DAD085">ControlledInput</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>value</span><span class="token" style="color:#c5c8c6">,</span><span> setValue</span><span class="token" style="color:#c5c8c6">]</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">useState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>  </span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>    </span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#96CBFE">input</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span class="token" style="color:#96CBFE">      </span><span class="token" style="color:#A8FF60">value</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">value</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">                      </span><span class="token" style="color:#7C7C7C">// React 通过 state 控制值</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span class="token" style="color:#96CBFE">      </span><span class="token" style="color:#A8FF60">onChange</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript parameter" style="color:#96CBFE">e</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript arrow" style="color:#96CBFE">=&gt;</span><span class="token script language-javascript" style="color:#96CBFE"> </span><span class="token script language-javascript" style="color:#DAD085">setValue</span><span class="token script language-javascript" style="color:#c5c8c6">(</span><span class="token script language-javascript" style="color:#96CBFE">e</span><span class="token script language-javascript" style="color:#c5c8c6">.</span><span class="token script language-javascript property-access" style="color:#96CBFE">target</span><span class="token script language-javascript" style="color:#c5c8c6">.</span><span class="token script language-javascript property-access" style="color:#96CBFE">value</span><span class="token script language-javascript" style="color:#c5c8c6">)</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#7C7C7C">// 每次输入时更新 state</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span class="token" style="color:#96CBFE">    </span><span class="token" style="color:#c5c8c6">/&gt;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span></span><span class="token" style="color:#c5c8c6">}</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">特点：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value</code> 完全由 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">React 状态驱动</code>。</li>
<li>任何用户输入都会触发 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件，然后更新 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">state</code>。</li>
<li>React 再通过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value={state}</code> 渲染出新值。</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">注意：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>如果设置了 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value</code> 却 没有 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code>，React 会发警告。</li>
<li>一旦组件是受控的，就不能再变回非受控（反之亦然）。</li>
</ul>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="非受控组件">非受控组件</h3>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">受控组件的值是由 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">DOM</code> 来管理的，使用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">defaultValue</code> 初始化，通过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ref</code> 读取值。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token maybe-class-name" style="color:#DAD085">UncontrolledInput</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> inputRef </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">useRef</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token function-variable" style="color:#DAD085">handleSubmit</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>    </span><span class="token" style="color:#DAD085">alert</span><span class="token" style="color:#c5c8c6">(</span><span>inputRef</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">value</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span> </span><span class="token" style="color:#7C7C7C">// 从 DOM 读取值</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span>  </span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span>    </span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#c5c8c6">&gt;</span><span class="token plain-text">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span class="token plain-text">      </span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#96CBFE">input</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#A8FF60">defaultValue</span><span class="token attr-equals" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">&quot;</span><span class="token" style="color:#F9EE98">hello</span><span class="token" style="color:#c5c8c6">&quot;</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#A8FF60">ref</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">inputRef</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#c5c8c6">/&gt;</span><span class="token plain-text">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span class="token plain-text">      </span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#96CBFE">button</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#A8FF60">onClick</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">handleSubmit</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">&gt;</span><span class="token plain-text">提交</span><span class="token" style="color:#c5c8c6">&lt;/</span><span class="token" style="color:#96CBFE">button</span><span class="token" style="color:#c5c8c6">&gt;</span><span class="token plain-text">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span><span class="token plain-text">    </span><span class="token" style="color:#c5c8c6">&lt;/</span><span class="token" style="color:#c5c8c6">&gt;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span>  </span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span></span><span class="token" style="color:#c5c8c6">}</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">特点:</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>使用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">defaultValue</code> 设定初始值。</li>
<li>输入变化由 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">DOM</code> 自己维护，<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">React</code> 不干涉。</li>
<li>用 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">ref</code> 访问当前输入值</li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">但这里因为我们是想自己控制是否触发 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件， 在非受控状态是无法做到的，所以我们内部的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code> 组件其实最终无论外界是用受控还是非受控的方式，我们都转化为了受控组件。</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="基本解决思路">基本解决思路</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">以利用<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">CompositionStart</code>作为一个信号，如果正在输入中文，<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">change</code>事件中的代码就先不要运行，等<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code>触发时，接着的<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">change</code>事件才可以运行其中的代码。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">示例代码如下：</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">首先 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Input</code> 组件如下：</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#96CBFE">input</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#A8FF60">value</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">innerValue</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#A8FF60">onCompositionStart</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">handleCompositionStart</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#A8FF60">onCompositionEnd</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">handleCompositionEnd</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span class="token" style="color:#96CBFE">  </span><span class="token" style="color:#A8FF60">onChange</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">handleChange</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#96CBFE">
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#c5c8c6">/&gt;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">然后我们看下<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value</code> 属性的<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">innerValue</code> 是什么。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-javascript" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#7C7C7C">// 用来记录此时是否Compositionstart事件触发了，如果触发就置为true</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#7C7C7C">// Compositionend结束就置为false</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#96CBFE">const</span><span> composingRef </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">useRef</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#99CC99">false</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span></span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>composingValue</span><span class="token" style="color:#c5c8c6">,</span><span> setComposingValue</span><span class="token" style="color:#c5c8c6">]</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> useState</span><span class="token" style="color:#EDEDED">&lt;</span><span>string</span><span class="token" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span></span><span class="token" style="color:#7C7C7C">// 如果启动了中文输入法，那么 innerValue 就是 composingValue</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span></span><span class="token" style="color:#7C7C7C">// composingValue 就是中文输入的时候比如 “三国”，你输入从 “s” 到 “sanguo”，此时 innerValue 都是 composingValue</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span></span><span class="token" style="color:#7C7C7C">// 除了中文输入法外，innerValue 都是 value</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span></span><span class="token" style="color:#96CBFE">const</span><span> innerValue </span><span class="token" style="color:#EDEDED">=</span><span> composingRef</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span> </span><span class="token" style="color:#EDEDED">?</span><span> composingValue </span><span class="token" style="color:#EDEDED">:</span><span> value </span><span class="token" style="color:#EDEDED">??</span><span> </span><span class="token" style="color:#A8FF60">&#x27;&#x27;</span><span class="token" style="color:#c5c8c6">;</span></span></code></div></div>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">上面可以看到 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">innerValue</code> 是最终渲染给 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code> 框的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value</code>，用户一般通过 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件获取值，所以我们在中文输入的时候，只要不触发 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件，是不是就好了！</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-javascript" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#7C7C7C">// 开始输入中文的时候把 composingRef.current 置为 true</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">handleCompositionStart</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">e</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">React</span><span class="token parameter" style="color:#c5c8c6">.</span><span class="token parameter property-access maybe-class-name">CompositionEvent</span><span class="token parameter" style="color:#EDEDED">&lt;</span><span class="token parameter maybe-class-name">HTMLInputElement</span><span class="token parameter" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span>    composingRef</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#99CC99">true</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>    </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>      </span><span class="token literal-property" style="color:#96CBFE">currentTarget</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> value </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> e</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span>  </span><span class="token" style="color:#7C7C7C">// 中文输入完毕，把 composingRef.current 置为 false，并把此时输入完的值给 handleChange（handleChange 会触发 onChange）</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span>  </span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">handleCompositionEnd</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">e</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">React</span><span class="token parameter" style="color:#c5c8c6">.</span><span class="token parameter property-access maybe-class-name">CompositionEvent</span><span class="token parameter" style="color:#EDEDED">&lt;</span><span class="token parameter maybe-class-name">HTMLInputElement</span><span class="token parameter" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span>    </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>composingRef</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span>      composingRef</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#99CC99">false</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span><span>      </span><span class="token" style="color:#DAD085">handleChange</span><span class="token" style="color:#c5c8c6">(</span><span>e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span><span></span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">handleChange</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">e</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">React</span><span class="token parameter" style="color:#c5c8c6">.</span><span class="token parameter property-access maybe-class-name">ChangeEvent</span><span class="token parameter" style="color:#EDEDED">&lt;</span><span class="token parameter maybe-class-name">HTMLInputElement</span><span class="token parameter" style="color:#EDEDED">&gt;</span><span class="token parameter"> </span><span class="token parameter" style="color:#EDEDED">|</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">React</span><span class="token parameter" style="color:#c5c8c6">.</span><span class="token parameter property-access maybe-class-name">CompositionEvent</span><span class="token parameter" style="color:#EDEDED">&lt;</span><span class="token parameter maybe-class-name">HTMLInputElement</span><span class="token parameter" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span><span>    </span><span class="token" style="color:#96CBFE">let</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> </span><span class="token literal-property" style="color:#96CBFE">value</span><span class="token" style="color:#EDEDED">:</span><span> newStr </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> e</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">currentTarget</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span><span>    </span><span class="token" style="color:#7C7C7C">// 当中文输入的时候，不触发 onChange 事件，触发 setComposingValue 只是为了让输入框同步你输入的 text</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span>    </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>composingRef</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span><span>      </span><span class="token" style="color:#DAD085">setComposingValue</span><span class="token" style="color:#c5c8c6">(</span><span>newStr</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token control-flow" style="color:#96CBFE">else</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span>      </span><span class="token" style="color:#7C7C7C">// 完成中文输入时同步一次 composingValue</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span><span>      </span><span class="token" style="color:#DAD085">setComposingValue</span><span class="token" style="color:#c5c8c6">(</span><span>newStr</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span><span>      </span><span class="token" style="color:#7C7C7C">// 中文输入完毕，此时触发 onChange</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25</span><span>      </span><span class="token" style="color:#DAD085">onChange</span><span class="token" style="color:#c5c8c6">(</span><span>newStr</span><span class="token" style="color:#c5c8c6">,</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span> e </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28</span></span></code></div></div>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="你以为就解决了？ NO！">你以为就解决了？ NO！</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">其他浏览器不会有问题，但谷歌浏览器却不行。这里要注意的是谷歌浏览器跟其他浏览器的执行顺序不同：</p>
<ul class="list-disc p-0 m-6 space-y-4">
<li>谷歌浏览器：<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionstart</code> -&gt; <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> -&gt; <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code></li>
<li>其他浏览器： <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionstart</code> -&gt; <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code> -&gt; <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code></li>
</ul>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">所以上述代码运行在谷歌浏览器的话，会有什么问题呢？一开始中文输入我们就将 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">composingRef.current</code> 设置为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">true</code>，最后一步 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code> 方法我们才将 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">composingRef.current</code> 恢复为 false,而 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 已经执行完了， 按这个逻辑中文输入法打字都改不了 input 的 value 值。
所以有的同学就会说，那么就专门对谷歌浏览器做一次处理就好了，例如判断是否为谷歌浏览器，在 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">compositionend</code> 方法最后再执行一次 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 方法</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="还没解决？">还没解决？</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">我们之前说了，要把 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code> 的受控和非受控都内部都转为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">受控的形式</code>，所以外部不传 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value</code> 的时候，我们依然要在内部转化为 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value</code> 属性的值。怎么做呢，其实就是拦截 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件，我们用自己的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">setState</code> 来更新 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">value</code> 属性的值。</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>value</span><span class="token" style="color:#c5c8c6">,</span><span> setValue</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">useState</span><span class="token" style="color:#c5c8c6">(</span><span>props</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">value</span><span class="token" style="color:#c5c8c6">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token function-variable" style="color:#DAD085">onChange</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">value</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> e</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span>  </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#EDEDED">!</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;value&#x27;</span><span> </span><span class="token" style="color:#96CBFE">in</span><span> props</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span>    </span><span class="token" style="color:#DAD085">setValue</span><span class="token" style="color:#c5c8c6">(</span><span>value</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>  props</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">onChange</span><span class="token" style="color:#EDEDED">?.</span><span class="token" style="color:#c5c8c6">(</span><span>value</span><span class="token" style="color:#c5c8c6">,</span><span> e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span></span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span></span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#96CBFE">input</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#A8FF60">onChange</span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=</span><span class="token script language-javascript" style="color:#c5c8c6">{</span><span class="token script language-javascript" style="color:#96CBFE">onChange</span><span class="token script language-javascript" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span></span></code></div></div>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="好像探讨结束了？no!">好像探讨结束了？no!</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">最后一个边界 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">case</code>，很烦人，比如我们还是最开始的案例，输了<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">san</code>。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">此时，如果我们按回车会触发键盘的<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Enter事件</code>，因为一般情况<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code>组件都支持<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Enter</code>事件处理函数作为<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">props</code>传递给<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code>
问题来了，这种外界传入的<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Enter</code>事件处理函数的目的一般都是比如校验<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code>框的值，比如格式化<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code>框的值，但是此时我们中文输入法里，这个<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Enter</code>只是想结束输入，而不是想校验<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code>框的值！
所以我们还要劫持<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onKeyDown</code>事件，处理一下！</p>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="最后">最后</h2>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8">文末我会把 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">arco design</code> 封装的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">useComposition</code>函数分享会出来，有英文注释，很简单的英文。
然后我们再解决一个文章开始说的问题，为什么腾讯的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">Tdesign</code> 在中文输入法下，会造成两次<code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code>, <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">arco design</code> 就能解决呢？
其实很简单，答案在以下代码的 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">32</code> 行。也就是我们每次 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 刷新值的时候，要做一个判断，如果 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">input</code> 的框里新的值跟旧值一样，那么就不会触发 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 事件，这就让虽然触发两次 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code>，但是由于第二次 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 的值跟第一次一样，所以第二次 <code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">onChange</code> 就被拒绝了。</p>
<p class="leading-8 break-all whitespace-normal mb-8 mt-8"><code class="font-normal inline-block whitespace-nowrap bg-color-100 text-color-500 rounded-sm px-2 py-0.5 text-xs">useComposition</code> 完整代码如下(收藏代码吧吧，很少有库把这个问题处理的很好的):</p>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-jsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ChangeEventHandler</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">CompositionEventHandler</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">KeyboardEventHandler</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> useRef</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> useState </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;react&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">InputProps</span><span class="token imports" style="color:#c5c8c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">TextAreaProps</span><span class="token imports"> </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;../interface&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span></span><span class="token" style="color:#96CBFE">interface</span><span> </span><span class="token" style="color:#FFFFB6;text-decoration:underline">useCompositionProps</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5</span><span>  </span><span class="token literal-property" style="color:#96CBFE">value</span><span class="token" style="color:#EDEDED">:</span><span> string</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6</span><span>  </span><span class="token literal-property" style="color:#96CBFE">maxLength</span><span class="token" style="color:#EDEDED">:</span><span> number</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7</span><span>  </span><span class="token literal-property" style="color:#96CBFE">onChange</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">InputProps</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">&#x27;onChange&#x27;</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8</span><span>  </span><span class="token literal-property" style="color:#96CBFE">onKeyDown</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">InputProps</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">&#x27;onKeyDown&#x27;</span><span class="token" style="color:#c5c8c6">]</span><span> </span><span class="token" style="color:#EDEDED">|</span><span> </span><span class="token maybe-class-name">TextAreaProps</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">&#x27;onKeyDown&#x27;</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9</span><span>  </span><span class="token literal-property" style="color:#96CBFE">onPressEnter</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">InputProps</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">&#x27;onPressEnter&#x27;</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10</span><span>  normalizeHandler</span><span class="token" style="color:#EDEDED">?</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>type</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">InputProps</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">&#x27;normalizeTrigger&#x27;</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">[</span><span>number</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token maybe-class-name">InputProps</span><span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">&#x27;normalize&#x27;</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11</span><span></span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13</span><span></span><span class="token" style="color:#7C7C7C">/**
</span></span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14</span>* Handle input text like Chinese
</span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15</span>* chrome： compositionstart -&gt; onChange -&gt; compositionend
</span><span class="token" style="color:#7C7C7C"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16</span>* other browser: compositionstart -&gt; compositionend -&gt; onChange
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17</span><span class="token" style="color:#7C7C7C">*/</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18</span><span></span><span class="token module" style="color:#96CBFE">export</span><span> </span><span class="token" style="color:#96CBFE">function</span><span> </span><span class="token" style="color:#DAD085">useComposition</span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter" style="color:#c5c8c6">{</span><span class="token parameter"> value</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> maxLength</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> onChange</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> onKeyDown</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> onPressEnter</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> normalizeHandler </span><span class="token parameter" style="color:#c5c8c6">}</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> useCompositionProps</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19</span><span>  </span><span class="token literal-property" style="color:#96CBFE">compositionValue</span><span class="token" style="color:#EDEDED">:</span><span> string</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20</span><span>  </span><span class="token literal-property" style="color:#96CBFE">triggerValueChange</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">typeof</span><span> onChange</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21</span><span>  </span><span class="token literal-property" style="color:#96CBFE">handleCompositionStart</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">CompositionEventHandler</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token maybe-class-name">HTMLInputElement</span><span> </span><span class="token" style="color:#EDEDED">|</span><span> </span><span class="token maybe-class-name">HTMLTextAreaElement</span><span class="token" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22</span><span>  </span><span class="token literal-property" style="color:#96CBFE">handleCompositionEnd</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">CompositionEventHandler</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token maybe-class-name">HTMLInputElement</span><span> </span><span class="token" style="color:#EDEDED">|</span><span> </span><span class="token maybe-class-name">HTMLTextAreaElement</span><span class="token" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23</span><span>  </span><span class="token literal-property" style="color:#96CBFE">handleValueChange</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">ChangeEventHandler</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token maybe-class-name">HTMLInputElement</span><span> </span><span class="token" style="color:#EDEDED">|</span><span> </span><span class="token maybe-class-name">HTMLTextAreaElement</span><span class="token" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24</span><span>  </span><span class="token literal-property" style="color:#96CBFE">handleKeyDown</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token maybe-class-name">KeyboardEventHandler</span><span class="token" style="color:#EDEDED">&lt;</span><span class="token maybe-class-name">HTMLInputElement</span><span> </span><span class="token" style="color:#EDEDED">|</span><span> </span><span class="token maybe-class-name">HTMLTextAreaElement</span><span class="token" style="color:#EDEDED">&gt;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25</span><span></span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> refIsComposition </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">useRef</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#99CC99">false</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token" style="color:#c5c8c6">[</span><span>compositionValue</span><span class="token" style="color:#c5c8c6">,</span><span> setCompositionValue</span><span class="token" style="color:#c5c8c6">]</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#DAD085">useState</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">29</span><span>  </span><span class="token" style="color:#96CBFE">const</span><span> </span><span class="token literal-property" style="color:#96CBFE">triggerValueChange</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#96CBFE">typeof</span><span> </span><span class="token function-variable" style="color:#DAD085">onChange</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter">newValue</span><span class="token parameter" style="color:#c5c8c6">,</span><span class="token parameter"> e</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">30</span><span>    </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">31</span><span>      onChange </span><span class="token" style="color:#EDEDED">&amp;&amp;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">32</span><span>      </span><span class="token" style="color:#7C7C7C">// Prevents onchange from being triggered twice</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">33</span><span>      newValue </span><span class="token" style="color:#EDEDED">!==</span><span> value </span><span class="token" style="color:#EDEDED">&amp;&amp;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">34</span><span>      </span><span class="token" style="color:#c5c8c6">(</span><span>maxLength </span><span class="token" style="color:#EDEDED">===</span><span> </span><span class="token nil" style="color:#96CBFE">undefined</span><span> </span><span class="token" style="color:#EDEDED">||</span><span> newValue</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#EDEDED">&lt;=</span><span> maxLength</span><span class="token" style="color:#c5c8c6">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">35</span><span>    </span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">36</span><span>      </span><span class="token" style="color:#DAD085">onChange</span><span class="token" style="color:#c5c8c6">(</span><span>newValue</span><span class="token" style="color:#c5c8c6">,</span><span> e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">37</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">38</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">39</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">40</span><span>  </span><span class="token control-flow" style="color:#96CBFE">return</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">41</span><span>    compositionValue</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">42</span><span>    triggerValueChange</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">43</span><span>    </span><span class="token function-variable" style="color:#DAD085">handleCompositionStart</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">e</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> any</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">44</span><span>      refIsComposition</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#99CC99">true</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">45</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">46</span><span>    </span><span class="token function-variable" style="color:#DAD085">handleCompositionEnd</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">e</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> any</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">47</span><span>      </span><span class="token" style="color:#DAD085">setCompositionValue</span><span class="token" style="color:#c5c8c6">(</span><span class="token nil" style="color:#96CBFE">undefined</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">48</span><span>      </span><span class="token" style="color:#DAD085">triggerValueChange</span><span class="token" style="color:#c5c8c6">(</span><span>e</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">target</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">value</span><span class="token" style="color:#c5c8c6">,</span><span> e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">49</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">50</span><span>    </span><span class="token function-variable" style="color:#DAD085">handleValueChange</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">e</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> any</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">51</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> newValue </span><span class="token" style="color:#EDEDED">=</span><span> e</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">target</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">value</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">52</span><span>      </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#EDEDED">!</span><span>refIsComposition</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">53</span><span>        </span><span class="token" style="color:#7C7C7C">// if e.type is compositionend event, the following content will trigger</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">54</span><span>        compositionValue </span><span class="token" style="color:#EDEDED">&amp;&amp;</span><span> </span><span class="token" style="color:#DAD085">setCompositionValue</span><span class="token" style="color:#c5c8c6">(</span><span class="token nil" style="color:#96CBFE">undefined</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">55</span><span>        </span><span class="token" style="color:#DAD085">triggerValueChange</span><span class="token" style="color:#c5c8c6">(</span><span>newValue</span><span class="token" style="color:#c5c8c6">,</span><span> e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">56</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span> </span><span class="token control-flow" style="color:#96CBFE">else</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">57</span><span>        refIsComposition</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span> </span><span class="token" style="color:#EDEDED">=</span><span> </span><span class="token" style="color:#99CC99">false</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">58</span><span>        </span><span class="token" style="color:#DAD085">setCompositionValue</span><span class="token" style="color:#c5c8c6">(</span><span>newValue</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">59</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">60</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">61</span><span>    </span><span class="token function-variable" style="color:#DAD085">handleKeyDown</span><span class="token" style="color:#EDEDED">:</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token parameter literal-property" style="color:#96CBFE">e</span><span class="token parameter" style="color:#EDEDED">:</span><span class="token parameter"> any</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token arrow" style="color:#EDEDED">=&gt;</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">62</span><span>      </span><span class="token" style="color:#96CBFE">const</span><span> keyCode </span><span class="token" style="color:#EDEDED">=</span><span> e</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">key</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">63</span><span>      </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#EDEDED">!</span><span>refIsComposition</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">current</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">64</span><span>        onKeyDown</span><span class="token" style="color:#EDEDED">?.</span><span class="token" style="color:#c5c8c6">(</span><span>e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">65</span><span>        </span><span class="token control-flow" style="color:#96CBFE">if</span><span> </span><span class="token" style="color:#c5c8c6">(</span><span>keyCode </span><span class="token" style="color:#EDEDED">===</span><span> </span><span class="token" style="color:#A8FF60">&#x27;Enter&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span> </span><span class="token" style="color:#c5c8c6">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">66</span><span>          onPressEnter</span><span class="token" style="color:#EDEDED">?.</span><span class="token" style="color:#c5c8c6">(</span><span>e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">67</span><span>          normalizeHandler </span><span class="token" style="color:#EDEDED">&amp;&amp;</span><span> </span><span class="token" style="color:#DAD085">triggerValueChange</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#DAD085">normalizeHandler</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;onPressEnter&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">(</span><span>e</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">target</span><span class="token" style="color:#c5c8c6">.</span><span class="token property-access">value</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span><span> e</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">68</span><span>        </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">69</span><span>      </span><span class="token" style="color:#c5c8c6">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">70</span><span>    </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">71</span><span>  </span><span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">72</span><span></span><span class="token" style="color:#c5c8c6">}</span></span></code></div></div>
<h2 class="font-medium mb-8 mt-8 text-[28px]" id="附录">附录</h2>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="安装 input">安装 input</h3>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-bash" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token" style="color:#DAD085">npm</span><span> i @t-headless-ui/react
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span><span></span><span class="token" style="color:#DAD085">yarn</span><span> i @t-headless-ui/react
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#DAD085">pnpm</span><span> i @t-headless-ui/react</span></span></code></div></div>
<h3 class="font-medium mb-8 mt-8 text-[20px]" id="引入和使用 input">引入和使用 input</h3>
<div class="relative w-full text-sm undefined"><div class="shrink-0 grow basis-0" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;border-radius:6px;background:#1d1f21;max-height:400px;font-size:0.875rem"><code class="language-tsx" style="white-space:pre;color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1</span><span class="token module" style="color:#96CBFE">import</span><span> </span><span class="token imports" style="color:#c5c8c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">InputComponent</span><span class="token imports"> </span><span class="token imports" style="color:#c5c8c6">}</span><span> </span><span class="token module" style="color:#96CBFE">from</span><span> </span><span class="token" style="color:#A8FF60">&#x27;@t-headless-ui/react&#x27;</span><span class="token" style="color:#c5c8c6">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3</span><span></span><span class="token" style="color:#7C7C7C">// 使用</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4</span><span></span><span class="token" style="color:#c5c8c6">&lt;</span><span class="token" style="color:#FFFFB6;text-decoration:underline">InputComponent</span><span class="token" style="color:#96CBFE"> </span><span class="token" style="color:#c5c8c6">/&gt;</span></span></code></div></div></div><div class="hidden z-10 xl:flex xl:w-48 mt-8 pl-0 shrink-0"><div class="sticky top-[90px] overflow-y-auto h-[calc(100vh-100px)]"><div data-target-id="前言"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">前言</div></div><div data-target-id="解决方案"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">解决方案</div></div><div data-target-id="Composition 事件"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">Composition 事件</div></div><div data-target-id="受控和非受控组件"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">受控和非受控组件</div><div data-target-id="受控组件"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">受控组件</div></div><div data-target-id="非受控组件"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">非受控组件</div></div></div><div data-target-id="基本解决思路"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">基本解决思路</div></div><div data-target-id="你以为就解决了？ NO！"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">你以为就解决了？ NO！</div></div><div data-target-id="还没解决？"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">还没解决？</div></div><div data-target-id="好像探讨结束了？no!"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">好像探讨结束了？no!</div></div><div data-target-id="最后"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">最后</div></div><div data-target-id="附录"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3">附录</div><div data-target-id="安装 input"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">安装 input</div></div><div data-target-id="引入和使用 input"><div class="text-color-500 text-[12px] cursor-pointer hover:text-primary-color mb-3 ml-2">引入和使用 input</div></div></div></div></div><!--$--><!--/$--></main></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[40104,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ClientSegmentRoot\"]\n3:I[97688,[\"/t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/t-ui/_next/static/chunks/b23f918aef2ac772.js\",\"/t-ui/_next/static/chunks/1b0efe442c7186ad.js\"],\"default\"]\n4:I[65932,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"default\"]\n5:I[20542,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"default\"]\n7:I[8858,[\"/t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/t-ui/_next/static/chunks/b23f918aef2ac772.js\",\"/t-ui/_next/static/chunks/1b0efe442c7186ad.js\",\"/t-ui/_next/static/chunks/54244e63fe228010.js\",\"/t-ui/_next/static/chunks/1ebf659cd03b1565.js\"],\"default\"]\n9:I[87039,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ClientPageRoot\"]\na:I[63652,[\"/t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"/t-ui/_next/static/chunks/b23f918aef2ac772.js\",\"/t-ui/_next/static/chunks/1b0efe442c7186ad.js\",\"/t-ui/_next/static/chunks/54244e63fe228010.js\",\"/t-ui/_next/static/chunks/1ebf659cd03b1565.js\",\"/t-ui/_next/static/chunks/d1e1b740c0d4e268.js\",\"/t-ui/_next/static/chunks/1ec246868d6b1088.js\"],\"default\"]\nd:I[6861,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"OutletBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[6861,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"ViewportBoundary\"]\n12:I[6861,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"MetadataBoundary\"]\n14:I[56272,[],\"default\"]\n:HL[\"/t-ui/_next/static/chunks/c57f25d7aa6d6db9.css\",\"style\"]\n:HL[\"/t-ui/_next/static/chunks/ec8a10aa2b532d44.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"rCCpH5bWYoOEh0RMrEWFu\",\"c\":[\"\",\"input\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"input\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/t-ui/_next/static/chunks/c57f25d7aa6d6db9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/t-ui/_next/static/chunks/07a06d645a86c72b.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/t-ui/_next/static/chunks/b23f918aef2ac772.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/t-ui/_next/static/chunks/1b0efe442c7186ad.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$3\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"serverProvidedParams\":{\"params\":{},\"promises\":[\"$@6\"]}}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/t-ui/_next/static/chunks/54244e63fe228010.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/t-ui/_next/static/chunks/1ebf659cd03b1565.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$7\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"serverProvidedParams\":{\"params\":\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\",\"promises\":[\"$@8\"]}}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L9\",null,{\"Component\":\"$a\",\"serverProvidedParams\":{\"searchParams\":{},\"params\":\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\",\"promises\":[\"$@b\",\"$@c\"]}}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/t-ui/_next/static/chunks/ec8a10aa2b532d44.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/t-ui/_next/static/chunks/d1e1b740c0d4e268.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/t-ui/_next/static/chunks/1ec246868d6b1088.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@f\"}]}]]}],{},null,false,false]},null,false,false]},[[\"$\",\"div\",\"l\",{\"className\":\"flex items-center justify-center h-screen bg-white\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-70\"}]}],[],[]],false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L10\",null,{\"children\":\"$@11\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@13\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$14\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"6:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\n8:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\nb:{}\nc:\"$0:f:0:1:0:props:children:1:props:serverProvidedParams:params\"\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"15:I[83528,[\"/t-ui/_next/static/chunks/d821eddc5a83a14d.js\",\"/t-ui/_next/static/chunks/a45895e8a6f72ee9.js\"],\"IconMark\"]\n13:[[\"$\",\"link\",\"0\",{\"rel\":\"icon\",\"href\":\"/t-ui/favicon.ico?favicon.176b088f.ico\",\"sizes\":\"128x128\",\"type\":\"image/x-icon\"}],[\"$\",\"$L15\",\"1\",{}]]\nf:null\n"])</script></body></html>