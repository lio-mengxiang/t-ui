(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1521,(e,c,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},79537,e=>{e.v({AElig:"Æ",AMP:"&",Aacute:"Á",Acirc:"Â",Agrave:"À",Aring:"Å",Atilde:"Ã",Auml:"Ä",COPY:"©",Ccedil:"Ç",ETH:"Ð",Eacute:"É",Ecirc:"Ê",Egrave:"È",Euml:"Ë",GT:">",Iacute:"Í",Icirc:"Î",Igrave:"Ì",Iuml:"Ï",LT:"<",Ntilde:"Ñ",Oacute:"Ó",Ocirc:"Ô",Ograve:"Ò",Oslash:"Ø",Otilde:"Õ",Ouml:"Ö",QUOT:'"',REG:"®",THORN:"Þ",Uacute:"Ú",Ucirc:"Û",Ugrave:"Ù",Uuml:"Ü",Yacute:"Ý",aacute:"á",acirc:"â",acute:"´",aelig:"æ",agrave:"à",amp:"&",aring:"å",atilde:"ã",auml:"ä",brvbar:"¦",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",ecirc:"ê",egrave:"è",eth:"ð",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",iacute:"í",icirc:"î",iexcl:"¡",igrave:"ì",iquest:"¿",iuml:"ï",laquo:"«",lt:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",oacute:"ó",ocirc:"ô",ograve:"ò",ordf:"ª",ordm:"º",oslash:"ø",otilde:"õ",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',raquo:"»",reg:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",times:"×",uacute:"ú",ucirc:"û",ugrave:"ù",uml:"¨",uuml:"ü",yacute:"ý",yen:"¥",yuml:"ÿ"})},27208,e=>{e.v({0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"})},73850,e=>{"use strict";var c=e.i(45100);let s=(0,e.i(51849).createIcon)({iconProps:{useFillCurrentColor:!0},viewBox:"0 0 156 94",paths:(0,c.jsx)("path",{d:"M0,31.18h31.18v62.56H0V31.18Zm155.46,5.67v56.89h-31.18V45.36c0-7.83-6.34-14.18-14.17-14.18h-17.01c.29,1.85,.44,3.74,.44,5.67v56.89h-31.18V45.36c0-7.83-6.35-14.18-14.17-14.18H31.18V0h25.51c13.15,0,24.69,6.89,31.21,17.25,2.62,4.15,4.43,8.86,5.2,13.92V0h25.51c20.35,0,36.85,16.5,36.85,36.85Z"})});e.s(["IconMLogo",0,s])},7823,e=>{"use strict";function c(e,c){if(null==e)return{};var s={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==c.indexOf(n))continue;s[n]=e[n]}return s}e.s(["default",()=>c])},37215,e=>{"use strict";function c(){return(c=Object.assign.bind()).apply(null,arguments)}e.s(["default",()=>c])},22480,e=>{"use strict";let c=(0,e.i(64334).createContext)({currentId:"",onLinkClick:()=>{},linkMap:{current:new Map}});e.s(["AnchorContext",0,c])},98319,e=>{"use strict";var c=e.i(64334);function s(...e){return(0,c.useCallback)(c=>{e.forEach(e=>{"function"==typeof e?e(c):null!=e&&(e.current=c)})},e)}e.s(["useComposedRefs",()=>s])},88036,59013,e=>{"use strict";var c=e.i(45100),s=e.i(64334),n=e.i(22480);function r(e){let c=(0,s.useRef)(null);return c.current=e,(0,s.useCallback)((...e)=>c.current?.(...e),[])}e.s(["useEvent",()=>r],59013);var i=e.i(96224);function d(e,c){try{return e.querySelector(c)}catch(e){return null}}function o({scrollContainer:e,targetId:c,offset:s,isScrolling:n}){var r,o;if(!c)return;let l=d(document,`#${CSS.escape(c)}`);if(!l)return;let t=e.current,a=((void 0===(r=t)&&(r=window),r)&&(r===window?Math.ceil(window.pageYOffset):r.scrollTop)||0)+((e,c)=>{if(!e.getClientRects().length)return 0;let s=e.getBoundingClientRect();return s.width||s.height?c&&c!==window?s.top-c.getBoundingClientRect().top:(c=e.ownerDocument.documentElement,s.top-c.clientTop):s.top})(l,t)+s;(n.current=!0,(0,i.isWindow)(t))?t.scrollTo((void 0===(o=t)&&(o=window),o)&&(o===window?Math.ceil(window.pageXOffset||window.scrollX):o.scrollLeft)||0,a):t.scrollTop=a}function l({targetId:e,linkMap:c,wrapperRef:s,currentId:n,setCurrentId:r,onChange:i}){e&&s.current&&c.current.get(e)&&e!==n&&r(e).then(()=>{i?.(e,n)})}var t=e.i(98319);let a=(0,s.forwardRef)((e,a)=>{let{scrollContainer:h,offset:u=0,children:j,onChange:x,queryKey:p="anchor-id",isCloseInitAnchor:g,...f}=e,{currentId:v,onLinkClick:m,wrapperRef:b,linkMap:C}=function({propScrollContainer:e,onChange:c,offset:n,queryKey:t,isCloseInitAnchor:a}){var h;let u,j,x=(0,s.useRef)(null),p=(0,s.useRef)(null),g=(0,s.useRef)(new Map),f=(0,s.useRef)(!1),[v,m]=function(e){let[c,n]=(0,s.useState)({value:"",resolve:e=>{}});return(0,s.useEffect)(()=>{c.resolve(c.value)},[c]),[c.value,e=>new Promise(c=>{n(s=>{let n=e;return"function"==typeof e&&(n=e(s.value)),{value:n,resolve:c}})})]}(0),b=r(()=>{if(f.current)return;let e=function({linkMap:e,scrollContainer:c}){let s=c.current,n=((0,i.isWindow)(s)?document.documentElement||document.body:s).getBoundingClientRect(),r=Array.from(e.current.keys()),o=[];for(let e of r){let c=d(document,"#"+CSS.escape(e));if(c){let{top:e}=c.getBoundingClientRect(),r=(0,i.isWindow)(s)?e:e-n.top;r>=0&&o.push({element:c,top:r})}}return 0===o.length?null:o.reduce((e,c)=>e.top<=c.top?e:c).element}({linkMap:g,scrollContainer:p});e?.id&&l({targetId:e.id,linkMap:g,wrapperRef:x,currentId:v,setCurrentId:m,onChange:c})}),C=r((h=()=>{b(),f.current=!1},u=null,(j=(...e)=>{u||(u=setTimeout(()=>{u=null,h(...e)},30))}).cancel=()=>{u&&(clearTimeout(u),u=null)},j));return(0,s.useEffect)(()=>(p.current=(0,i.isString)(e)?d(document,e):e||window,p.current?.addEventListener("scroll",C),()=>{p.current?.removeEventListener("scroll",C)}),[C,e]),(0,s.useEffect)(()=>{if(!a)return void C();let e=new URLSearchParams(new URL(window.location.href).search).get(t);e&&(l({targetId:e,linkMap:g,wrapperRef:x,currentId:v,setCurrentId:m,onChange:c}),o({scrollContainer:p,targetId:e,offset:n,isScrolling:f}))},[]),{onScroll:C,currentId:v,onLinkClick:function(e,s){e.preventDefault(),l({targetId:s,linkMap:g,wrapperRef:x,currentId:v,setCurrentId:m,onChange:c}),o({scrollContainer:p,targetId:s,offset:n,isScrolling:f})},wrapperRef:x,scrollContainer:p,linkMap:g}}({propScrollContainer:h,onChange:x,offset:u,queryKey:p,isCloseInitAnchor:g});return(0,c.jsx)(n.AnchorContext.Provider,{value:{currentId:v,linkMap:C,onLinkClick:m},children:(0,c.jsx)("div",{...f,ref:(0,t.useComposedRefs)(b,a),children:j})})});e.s(["Anchor",0,a],88036)},69438,e=>{"use strict";var c=e.i(45100),s=e.i(64334),n=e.i(22480),r=e.i(98319);let i=(0,s.forwardRef)((e,i)=>{let{onLinkClick:d,linkMap:o,currentId:l}=(0,s.useContext)(n.AnchorContext),{onClick:t,targetId:a,children:h,className:u,activeClassName:j,...x}=e,p=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var e;return e=p.current,a&&o.current.set(a,e),()=>{o.current.delete(a)}},[a,o]),(0,c.jsx)("div",{ref:(0,r.useComposedRefs)(i,p),...x,onClick:e=>{e.stopPropagation(),t?.(e),d?.(e,a)},"data-target-id":a,className:l===a?j:u,children:h})});e.s(["AnchorLink",0,i],69438)},93562,e=>{"use strict";var c=e.i(88036),s=e.i(69438),n=e.i(22480);let r={Root:c.Anchor,Link:s.AnchorLink,Context:n.AnchorContext};e.s(["Anchor",()=>r])},54473,e=>{"use strict";var c=e.i(45100),s=e.i(18694);e.i(82928);var n=e.i(72304),r=e.i(2697),i=e.i(47445),d=e.i(69389);function o(e){let o={code:"code",h2:"h2",h3:"h3",p:"p",...(0,s.useMDXComponents)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.H1,{children:"css 换肤方案"}),"\n",(0,c.jsx)(r.AvatarM,{}),"\n",(0,c.jsx)(n.ImageTypography,{src:"/solution/theme.webp",fill:!0,alt:"button",containerClassName:"h-96"}),"\n",(0,c.jsx)(o.h2,{children:"介绍"}),"\n",(0,c.jsxs)(o.p,{children:["其实现在社区主流的 css 换肤方案一般分为两种：",(0,c.jsx)(o.code,{children:"css in js"})," 和 ",(0,c.jsx)(o.code,{children:"css 变量"}),"，但 ",(0,c.jsx)(o.code,{children:"css in js"})," 某种程度也需要配置 css 变量。"]}),"\n",(0,c.jsxs)(o.p,{children:["在讨论 css 主题切换功能设计之前，我们不得不提一下目前很多组件库的困局，就是样式很难拓展，因为只要不是 ",(0,c.jsx)(o.code,{children:"headless"})," 组件库（只包含 js 和 html 逻辑，不包含样式的组件库），都难免跟 css 有耦合之处，尤其是\n在你们的项目对于样式修改粒度要求很细的层次时，只要你做过大项目，那个痛苦程度是很深的。这也是为什么国外现在非常流行 ",(0,c.jsx)(o.code,{children:"headless"})," 组件库的原因。大家对定制化组件库样式的需求非常强烈。"]}),"\n",(0,c.jsxs)(o.p,{children:["那么我们来看看之前 ",(0,c.jsx)(o.code,{children:"ant design"})," 4 版本之前, ",(0,c.jsx)(o.code,{children:"material ui"})," 等主流组件库之前的样式为什么难以定制化？"]}),"\n",(0,c.jsx)(o.h3,{children:"ant design 的困局"}),"\n",(0,c.jsxs)(o.p,{children:["在 ",(0,c.jsx)(o.code,{children:"ant design 5"}),"之前，你知道为什么用以下方式导入 ",(0,c.jsx)(o.code,{children:"ant"})," 组件吗？并且这样的导入方式为什么连 ",(0,c.jsx)(o.code,{children:"css"})," 也一并导入进来了？"]}),"\n",(0,c.jsx)(i.CodeBlock,{code:"import { message } from 'antd';",language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["是因为 ",(0,c.jsx)(o.code,{children:"ant"})," 为了实现 ",(0,c.jsx)(o.code,{children:"css"})," 的按需加载（就是我使用了 ",(0,c.jsx)(o.code,{children:"message"})," 组件，我只加载 ",(0,c.jsx)(o.code,{children:"message"})," 组件的 ",(0,c.jsx)(o.code,{children:"css"})," 样式，不加载别的组件的 ",(0,c.jsx)(o.code,{children:"css"}),"），使用 ",(0,c.jsx)(o.code,{children:"babel-plugin-import"}),"，使用方法如下"]}),"\n",(0,c.jsx)(o.p,{children:"官方文档这样描述："}),"\n",(0,c.jsx)(i.CodeBlock,{code:"npm install babel-plugin-import -D",language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["然后在 ",(0,c.jsx)(o.code,{children:".babelrc"})," 配置文件中，举个例子可以添加以下配置代码："]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`{
  "plugins": [
    ["import", {
      "libraryName": "antd",
      "libraryDirectory": "libs",
      "style": "css" 
    }]
  ]
}`,language:"javascript"}),"\n",(0,c.jsx)(o.p,{children:"原理是什么呢？"}),"\n",(0,c.jsxs)(o.p,{children:["其实是 ",(0,c.jsx)(o.code,{children:"babel"})," 在编译你的代码的时候，会自动帮你引入对应组件的 ",(0,c.jsx)(o.code,{children:"css"}),"，也就是帮你自动插入 ",(0,c.jsx)(o.code,{children:"css"})]}),"\n",(0,c.jsxs)(o.p,{children:["可是成也 ",(0,c.jsx)(o.code,{children:"babel-plugin-import"}),"，败也 ",(0,c.jsx)(o.code,{children:"babel-plugin-import"}),"，这样确实很方便，对于新手用户而言。但问题又很明显，很多人用 ",(0,c.jsx)(o.code,{children:"ant-deisgn"})," 都不知道为什么像我们上面那样导入组件，\n怎么 ",(0,c.jsx)(o.code,{children:"css"})," 也导入进来了，这样的话你根本没办法对 ",(0,c.jsx)(o.code,{children:"ant "}),"做样式上的定制化改造。"]}),"\n",(0,c.jsxs)(o.p,{children:["所以很多项目，包括大厂很多项目，甚至我在用飞书的时候，飞书最开始也存在的问题，就是 ",(0,c.jsx)(o.code,{children:"css"})," 覆盖，大家普遍的思路都是用新的，同名的 ",(0,c.jsx)(o.code,{children:"css"})," 去覆盖 ",(0,c.jsx)(o.code,{children:"ant"})," 的样式。"]}),"\n",(0,c.jsxs)(o.p,{children:["问题也很明显，",(0,c.jsx)(o.code,{children:"css"})," 维护起来很糟心，尤其是大型项目，因为每个模块可能都是不同的项目组在维护，很可能一个组覆盖的 ",(0,c.jsx)(o.code,{children:"css"})," 影响了另一个组。"]}),"\n",(0,c.jsxs)(o.p,{children:["正确的解决办法是什么呢？(因为很多国内组件库都是这样的写法，例如字节的 ",(0,c.jsx)(o.code,{children:"arco design"}),", 腾讯的 ",(0,c.jsx)(o.code,{children:"t-design"})," 等等，所以介绍如何正确改造也比较重要)。"]}),"\n",(0,c.jsxs)(o.p,{children:["首先，不要引入 ",(0,c.jsx)(o.code,{children:"babel-plugin-import"}),"，然后单独封装每个组件的 ",(0,c.jsx)(o.code,{children:"css"}),"，举个例子，我们有一个 ",(0,c.jsx)(o.code,{children:"ant4"})," 版本的 ",(0,c.jsx)(o.code,{children:"Button"})," 组件，我们这样改造："]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`// Button组件
import { Button } from 'antd' ;
// 这里引入的是 css，当然你的项目用 sass 或者 less，改成相应的就行了
import './style/index.css'`,language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["一般你只有用 ",(0,c.jsx)(o.code,{children:"ant"})," 的 ",(0,c.jsx)(o.code,{children:"less"}),"(当然其它的库也有对应 ",(0,c.jsx)(o.code,{children:"css"})," 的预处理器)，改造成本才比较小。"]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`/** 这里复制粘贴 ant button 的css 然后改其中的 css 样式*/`,language:"javascript"}),"\n",(0,c.jsx)(o.p,{children:"当然，如果你也可以用"}),"\n",(0,c.jsx)(i.CodeBlock,{code:"import './style/index.css'",language:"javascript"}),"\n",(0,c.jsx)(o.p,{children:"改为"}),"\n",(0,c.jsx)(i.CodeBlock,{code:"import './style/index.less'",language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["但还需要把 ",(0,c.jsx)(o.code,{children:"less"})," 里的公共变量也需要一起改了，这个就更复杂一些。"]}),"\n",(0,c.jsxs)(o.p,{children:["所以你可以看到，",(0,c.jsx)(o.code,{children:"ant design"})," 在更改样式这块很不容易，这也是 ",(0,c.jsx)(o.code,{children:"ant5"})," 为什么放弃 ",(0,c.jsx)(o.code,{children:"less"}),"，转向了 ",(0,c.jsx)(o.code,{children:"css-in-js"}),"，因为 ",(0,c.jsx)(o.code,{children:"css-in-js"})," 相当于把 ",(0,c.jsx)(o.code,{children:"css"})," 全部交给 ",(0,c.jsx)(o.code,{children:"js"})," 去处理，这样我们在 ",(0,c.jsx)(o.code,{children:"js"})," 里修改变量相当于修改了 ",(0,c.jsx)(o.code,{children:"css"}),"。"]}),"\n",(0,c.jsx)(o.h3,{children:"css-in-js 真的好用吗？"}),"\n",(0,c.jsxs)(o.p,{children:[(0,c.jsx)(o.code,{children:"css-in-js"})," 相当于给你开放一些css变量让你动态设置，我们看下 ",(0,c.jsx)(o.code,{children:"ant design 5"})," 的文档是怎么使用的。"]}),"\n",(0,c.jsxs)(o.p,{children:["通过在 ",(0,c.jsx)(o.code,{children:"ConfigProvider"})," 中传入 ",(0,c.jsx)(o.code,{children:"theme"})," 变量，可以配置主题。在升级 ",(0,c.jsx)(o.code,{children:"v5"})," 后，将默认使用 ",(0,c.jsx)(o.code,{children:"v5"})," 的主题，以下是将配置主题示例："]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`import { Button, ConfigProvider } from 'antd';
import React from 'react';

const App: React.FC = () => (

<ConfigProvider
theme={{
  token: {
    colorPrimary: 'red',
  },
}}
>
<Button>按钮</Button>
</ConfigProvider>
);

export default App;`,language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["这将会得到以 ",(0,c.jsx)(o.code,{children:"#00b96b"})," 为主色的主题的 ",(0,c.jsx)(o.code,{children:"Button"}),"。"]}),"\n",(0,c.jsxs)(o.p,{children:["也就是我们其实也不是随心所欲的去修改 ",(0,c.jsx)(o.code,{children:"css"}),"，也是在人家开放接口的范围内修改。如果你想修改的 ",(0,c.jsx)(o.code,{children:"css"})," 样式不在其提供的修改样式的接口里，你还是不能定制化自己的样式。"]}),"\n",(0,c.jsxs)(o.p,{children:["所以 ",(0,c.jsx)(o.code,{children:"css-in-js"})," 并没有想象中那么完美，任何事情没有好坏只有适不适合，如果的业务定制性没有那么高，其实 ",(0,c.jsx)(o.code,{children:"css-in-js"})," 也能接受(如果定制性很弱，其实 ant4 的 ",(0,c.jsx)(o.code,{children:"css"})," 方案也挺好的)，但如果定制性非常强，一定是选择 ",(0,c.jsx)(o.code,{children:"headless"})," 组件库是更好的。"]}),"\n",(0,c.jsxs)(o.p,{children:["如果我们用 ",(0,c.jsx)(o.code,{children:"less"})," 或者 ",(0,c.jsx)(o.code,{children:"sass"}),"，其实也能做到类似 ",(0,c.jsx)(o.code,{children:"css-in-js"})," 的功能，怎么做呢，休息喝口水，咋们接着看。"]}),"\n",(0,c.jsx)(o.h2,{children:"css 变量换肤方案"}),"\n",(0,c.jsxs)(o.p,{children:["之前做过一个名为 ",(0,c.jsx)(o.code,{children:"@mx-design"})," 的组件库，我觉得这样的 ",(0,c.jsx)(o.code,{children:"css"})," 主题色设计方案还挺好用的。"]}),"\n",(0,c.jsxs)(o.p,{children:["我们拿 ",(0,c.jsx)(o.code,{children:"button"}),"组件为例，最终打包的组件库，我会生成一个 ",(0,c.jsx)(o.code,{children:"index.css"}),"，这个 ",(0,c.jsx)(o.code,{children:"css"})," 中包含了一些 ",(0,c.jsx)(o.code,{children:"css"})," 变量,例如"]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`.mx-base-button {
  display: inline-flex;
  position: relative;
  align-items: center;
  justify-content: center;
  outline: none;
  padding: var(--btn-padding);
  height: var(--btn-height);
  appearance: none;
  user-select: none;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.2s var(--transition-timing-function-standard);
  box-sizing: border-box;
  line-height: 1.5715;
  border-radius: var(--btn-radius);
}`,language:"css"}),"\n",(0,c.jsxs)(o.p,{children:["然后，对外暴露一个修改 ",(0,c.jsx)(o.code,{children:"css"})," 变量的方法，例如："]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`import { isObject } from './is';
/**
* 更换css变量的方法
*/
export function setCssVariables(variables: Record<string, any>, root = document.body) {
  if (variables && isObject(variables)) {
    Object.keys(variables).forEach((themKey) => {
      root.style.setProperty(themKey, variables[themKey]);
    });
  }
}
`,language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["假设你有两份文件，分别是 ",(0,c.jsx)(o.code,{children:"light.ts"})," 和 ",(0,c.jsx)(o.code,{children:"dark.ts"}),"，两份文件里的变量名都是一样的，只是值不一样，我们可以这样使用："]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`import { setCssVariables } from './css';
import light from './light';
import dark from './dark';

// 切换到亮色主题
setCssVariables(light);

// 切换到暗色主题
setCssVariables(dark);`,language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:[(0,c.jsx)(o.code,{children:"light.ts"})," 如下(",(0,c.jsx)(o.code,{children:"dark.ts"})," 跟 ",(0,c.jsx)(o.code,{children:"light.ts"})," 的变量名一样，从而达到换肤的效果，同时也支持更多的皮肤)："]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`export const lightTheme = {
  // base color
  '--brand-color-1': '#f2f3ff',
  '--brand-color-2': '#d9e1ff',
  '--brand-color-3': '#b5c7ff',
  '--brand-color-4': '#8eabff',
  '--brand-color-5': '#618dff',
  '--brand-color-6': '#366ef4',
  // ... other variable
  // brand color status
  '--brand-color': 'var(--brand-color-7)',
  '--brand-color-hover': 'var(--brand-color-6)',
  '--brand-color-focus': 'var(--brand-color-2)',
  '--brand-color-active': 'var(--brand-color-8)',
  '--brand-color-disabled': 'var(--brand-color-3)',
  // error color
  // warning color
  // success color
  // ...
  ’other‘: 'var(--other-color)',
}`,language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["那么全局样式改变我们已经完成了，但一个好的 ",(0,c.jsx)(o.code,{children:"css"})," 换肤方案一定要兼顾全局和局部的样式改变，也就是我只想改一个 ",(0,c.jsx)(o.code,{children:"Button"})," 的样式，而不要一改变量牵扯到所有的 ",(0,c.jsx)(o.code,{children:"Button"})," 样式不在其提供的修改样式的接口里，你还是不能定制化自己的样式。"]}),"\n",(0,c.jsx)(o.p,{children:"我们的实现的目标为："}),"\n",(0,c.jsx)(o.p,{children:"1、局部样式改变"}),"\n",(0,c.jsxs)(o.p,{children:["比如所有的 ",(0,c.jsx)(o.code,{children:"button"})," 默认都是蓝色，但是某个 ",(0,c.jsx)(o.code,{children:"button"})," 我想是黄色，允许单独给 ",(0,c.jsx)(o.code,{children:"button"})," 传递主题色。"]}),"\n",(0,c.jsx)(o.p,{children:"2、全局样式改变"}),"\n",(0,c.jsxs)(o.p,{children:["比如我想对所有的 ",(0,c.jsx)(o.code,{children:"button"})," 的主色都设为绿色，提供一个全局更换颜色配置的入口。"]}),"\n",(0,c.jsx)(o.p,{children:"全局的之前讲过了，我们来讲讲局部样式更改。"}),"\n",(0,c.jsx)(o.h3,{children:"局部更换主题色"}),"\n",(0,c.jsxs)(o.p,{children:["最开始我是想向 ",(0,c.jsx)(o.code,{children:"css-in-js"})," 那样，传递参数，然后用 ",(0,c.jsx)(o.code,{children:"style"})," 来设置样式，但是毫无疑问不能这样做，这样会影响 ",(0,c.jsx)(o.code,{children:"css"})," 优先级，有些同学更改了 ",(0,c.jsx)(o.code,{children:"class"})," 可能因为没有 ",(0,c.jsx)(o.code,{children:"style"})," 优先级高而导致样式不生效，这就造成奇怪的体验。"]}),"\n",(0,c.jsxs)(o.p,{children:["当然这也是普通 ",(0,c.jsx)(o.code,{children:"css"})," 不如 ",(0,c.jsx)(o.code,{children:"css-in-js"})," 的地方，可以像传入 ",(0,c.jsx)(o.code,{children:"js"})," 变量一样更改 ",(0,c.jsx)(o.code,{children:"css"}),"。但是我们也有办法。之前说了，这样独立样式的 ",(0,c.jsx)(o.code,{children:"button"})," 毕竟不是常见的需求，因为一般大家的 ",(0,c.jsx)(o.code,{children:"ui"})," 都有一套设计规范，我们在全局更换主题色即可。"]}),"\n",(0,c.jsxs)(o.p,{children:["这样单独修改的需求可以将从打包好的css样式中提取出对应组件的css,把样式单独更改后，和 ",(0,c.jsx)(o.code,{children:"js"})," 一起导出。"]}),"\n",(0,c.jsx)(o.p,{children:"也可以采取覆盖局部样式的方式。（不推荐）"}),"\n",(0,c.jsxs)(o.p,{children:["现在想来，局部更换主题色似乎不太好做，还好，原生 ",(0,c.jsx)(o.code,{children:"css"})," 变量支持 ",(0,c.jsx)(o.code,{children:"css"})," 变量的作用域，什么意思呢？在 ",(0,c.jsx)(o.code,{children:"mdn"})," 中，这种作用域被称之为继承性。以下转自 ",(0,c.jsx)(o.code,{children:"mdn"})," 对继承性的解释和案例："]}),"\n",(0,c.jsxs)(o.p,{children:["自定义属性会继承。这意味着如果在一个给定的元素上，没有为这个自定义属性设置值，在其父元素上的值会被使用。看这一段 ",(0,c.jsx)(o.code,{children:"HTML"}),"："]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`<div class="one">
<div class="two">
  <div class="three"></div>
  <div class="four"></div>
</div>
</div>`,language:"javascript"}),"\n",(0,c.jsx)(o.p,{children:"配套的 CSS："}),"\n",(0,c.jsx)(i.CodeBlock,{code:`.two {
--test: 10px;
}
.three {
--test: 2em;
}`,language:"css"}),"\n",(0,c.jsxs)(o.p,{children:["在这个情况下， ",(0,c.jsx)(o.code,{children:"var(--test)"})," 的结果分别是："]}),"\n",(0,c.jsxs)(o.p,{children:["对于元素 ",(0,c.jsx)(o.code,{children:'class="two" ：10px'}),"\n对于元素 ",(0,c.jsx)(o.code,{children:'class="three" ：2em'}),"\n对于元素 ",(0,c.jsx)(o.code,{children:'class="four" ：10px'})," （继承自父属性）\n啥意思呢，就是我的 ",(0,c.jsx)(o.code,{children:"button"})," 组件，我可以默认用全局变量的样式，比如我设置在 ",(0,c.jsx)(o.code,{children:"body"})," 上，然后 ",(0,c.jsx)(o.code,{children:"button"})," 组件包裹一个 ",(0,c.jsx)(o.code,{children:"div"}),"， ",(0,c.jsx)(o.code,{children:"div"})," 上也有同名的一个变量，那么 ",(0,c.jsx)(o.code,{children:"button"})," 组件会优先使用 ",(0,c.jsx)(o.code,{children:"div"})," 上的变量。"]}),"\n",(0,c.jsxs)(o.p,{children:["基于以上原理我可以在 ",(0,c.jsx)(o.code,{children:"button"})," 组件里，直接在 ",(0,c.jsx)(o.code,{children:"style"})," 中用来设置 ",(0,c.jsx)(o.code,{children:"css"})," 变量，代码如下"]}),"\n",(0,c.jsx)(i.CodeBlock,{code:`const localBtnTheme = {
  "--btn-color": "red",
  "--btn-width": 12
};

<div style={{ style, ...localBtnTheme }} >`,language:"javascript"}),"\n",(0,c.jsxs)(o.p,{children:["其中 ",(0,c.jsx)(o.code,{children:"style"})," 是正常外面传给组件的 ",(0,c.jsx)(o.code,{children:"style"}),"， ",(0,c.jsx)(o.code,{children:"localBtnTheme"})," 是指 ",(0,c.jsx)(o.code,{children:"css"})," 变量"]}),"\n",(0,c.jsxs)(o.p,{children:["如果你有其他组件库主题切换的方案，欢迎在评论区，或者我的 ",(0,c.jsx)(o.code,{children:"github"})," 上、微信组件库讨论群一起讨论哦"]})]})}function l(e={}){let{wrapper:n}={...(0,s.useMDXComponents)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}function t(){return(0,c.jsx)(l,{})}e.s(["ThemeSolution",()=>t],54473)}]);